2019-06-13 15:43:42,334 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-13 15:43:47,235 del_mongo.py INFO [line:66] apply 表符合查询条件{'phone': '15813873529'} 的数据有0 条
2019-06-13 15:43:47,358 del_mongo.py INFO [line:37] close Client
2019-06-13 15:43:56,059 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-13 15:44:00,906 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'phone': '15813873529'} 的数据有1 条
2019-06-13 15:44:01,029 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00bff1aa895a4af9b261f6'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d00bff1aa895a2582b261c9'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Feicheng', 'lastName': 'Jiang', 'chineseName': '鄂孔杰', 'pastEnglishName': '', 'email': 'onedi55@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15813873529', 'address': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '500101198612296432226', 'countryIssue': 'CHN', 'birthday': 196099200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'idCardAddressReadOnly': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['a4797509-4ca0-4554-927b-cb00124ff67c.jpg', '4f129451-ab60-43cc-b582-855845c5fc1d.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt999999', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': '6To10Years', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['speculation', 'asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['b3028c9a-1e39-4c5c-bdaa-f863aeba3411.jpg'], 'passportMaterialBackup': ['a4797509-4ca0-4554-927b-cb00124ff67c.jpg', '4f129451-ab60-43cc-b582-855845c5fc1d.jpg'], 'signatureMaterial': [], 'isReferralCode': 'Y', 'passportMaterialBak': ['a4797509-4ca0-4554-927b-cb00124ff67c.jpg', '4f129451-ab60-43cc-b582-855845c5fc1d.jpg'], 'identityAuthenticationImgBak': ['b3028c9a-1e39-4c5c-bdaa-f863aeba3411.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '重庆市', 'idNo': '430523197603204314', 'userName': '蒋飞成', 'sex': '男', 'contactAddr': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'birthday': '1976/3/20', 'nationality': '汉', 'cardedPlace': '迁西县公安局', 'cardedExpiryDate': '20130703-20180703'}, 'createdTime': 1560330225349.0, 'updatedTime': 1560330225349.0}
2019-06-13 15:44:01,031 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5d00bff1aa895a2582b261c9
2019-06-13 15:44:01,031 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-06-13 15:44:01,084 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5d00bff1aa895a2582b261c9')} 的数据有1 条
2019-06-13 15:44:01,192 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00bff1aa895a2582b261c9'), 'isRoRefuse': '', 'accountType': ['securitiesMargin', 'leveragedForeignExchangeAccountMargin', 'bullionMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5d00bff1aa895a4af9b261f6')], 'learnHow': ['advertising', 'newspaper'], 'tradingAuthorization': [''], 'tradingAuthorizationBak': [''], 'isRelatedAccounts': ['opt'], 'caApplyErr': [], 'reviewTime': [], 'step': 'RiskDisclosure', 'origin': '', 'idpUserId': '75327434-ee89-4065-af0e-eead7185aca7', 'applicationFor': 'individual', 'parentId': '', 'IBparentId': '', 'mailLanguage': '', 'accountOpeningWay': 'electronicAuth', 'appBankName': '中国人民', 'appBankAccount': '728282828', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'notComplete', 'customerSource': 'app', 'applySeqId': '8831', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5d00c2aaaa895a2932b263ad'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895ae045b263ac'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a2c40b263ab'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a3589b263aa'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895ab8a2b263a9'), 'username': 'aaron_chan', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895acb7db263a8'), 'username': 'onedi.admin', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a267eb263a7'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a73c1b263a6'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a2c67b263a5'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a456fb263a4'), 'username': 'onedi.admin', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a328ab263a3'), 'username': 'cliff_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a7318b263a2'), 'username': 'aaron_chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a7e4db263a1'), 'username': 'ro_gold', 'usertype': 'bullionRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895ae6ffb263a0'), 'username': 'ro_eb_t1', 'usertype': 'bullionRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a6cecb2639f'), 'username': 'aaron_test', 'usertype': 'bullionRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a0082b2639e'), 'username': 'onedi.admin', 'usertype': 'bullionRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a1ad4b2639d'), 'username': 'cliff_test', 'usertype': 'bullionRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a62b6b2639c'), 'username': 'gold_onedi', 'usertype': 'bullionRo'}, {'isApproval': False, '_id': ObjectId('5d00c2aaaa895a5534b2639b'), 'username': 'ceci_test', 'usertype': 'bullionRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': 'N', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': 'N', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': 'N', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5d00c2aaaa895a363eb263ae'), 'taxId': '500101198612296436', 'residenceJurisdiction': 'China'}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}, {'_id': ObjectId('5cc550fbe0d90d746063bac7'), 'pageNo': 15, 'x': 130, 'y': 185}, {'_id': ObjectId('5cc55141e0d90d746063bac8'), 'pageNo': 17, 'x': 130, 'y': 185}], 'signatureSize': {'xDpi': '660', 'yDpi': '660'}, 'submitTime': None, 'createdTime': 1560330225254.0, 'updatedTime': 1560330922429.0, 'remark': '', 'reason': '', 'principal': '', 'appBankPhone': '15099996666', 'appFileId': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': '', 'appVersion': 'v1.4.0', 'deviceModel': 'iPhone XR/iOS:12.3.1', 'isContactClient': '', 'reSubmitTime': None, 'LearnHowCodeOps': '', 'isHideGeneratePdfPage': 'N', 'isCommonService': 'Y', 'refuseBy': ''}
2019-06-13 15:44:01,192 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5d00bff1aa895a4af9b261f6')]
2019-06-13 15:44:01,193 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-06-13 15:44:01,246 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5d00bff1aa895a4af9b261f6')} 的数据有1 条
2019-06-13 15:44:01,355 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00bff1aa895a4af9b261f6'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d00bff1aa895a2582b261c9'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Feicheng', 'lastName': 'Jiang', 'chineseName': '鄂孔杰', 'pastEnglishName': '', 'email': 'onedi55@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15813873529', 'address': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '500101198612296432226', 'countryIssue': 'CHN', 'birthday': 196099200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'idCardAddressReadOnly': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['a4797509-4ca0-4554-927b-cb00124ff67c.jpg', '4f129451-ab60-43cc-b582-855845c5fc1d.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt999999', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': '6To10Years', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['speculation', 'asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['b3028c9a-1e39-4c5c-bdaa-f863aeba3411.jpg'], 'passportMaterialBackup': ['a4797509-4ca0-4554-927b-cb00124ff67c.jpg', '4f129451-ab60-43cc-b582-855845c5fc1d.jpg'], 'signatureMaterial': [], 'isReferralCode': 'Y', 'passportMaterialBak': ['a4797509-4ca0-4554-927b-cb00124ff67c.jpg', '4f129451-ab60-43cc-b582-855845c5fc1d.jpg'], 'identityAuthenticationImgBak': ['b3028c9a-1e39-4c5c-bdaa-f863aeba3411.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '重庆市', 'idNo': '430523197603204314', 'userName': '蒋飞成', 'sex': '男', 'contactAddr': '湖南省邵阳县五峰铺镇白田村下尤铺组17号', 'birthday': '1976/3/20', 'nationality': '汉', 'cardedPlace': '迁西县公安局', 'cardedExpiryDate': '20130703-20180703'}, 'createdTime': 1560330225349.0, 'updatedTime': 1560330225349.0}
2019-06-13 15:44:01,355 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : 75327434-ee89-4065-af0e-eead7185aca7
2019-06-13 15:44:01,355 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-06-13 15:44:01,409 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': '75327434-ee89-4065-af0e-eead7185aca7'} 的数据有1 条
2019-06-13 15:44:01,516 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00bfdb42e470570b95329e'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15813873529', 'email': '15813873529@toBeCreated.com', 'phone_number': '8615813873529', 'custom': {'device_id': '5E041B1C-88C4-4BC7-9723-0AE7B199F15C'}, 'subject': '75327434-ee89-4065-af0e-eead7185aca7', 'created_at': datetime.datetime(2019, 6, 12, 9, 3, 22, 510000), 'updated_at': datetime.datetime(2019, 6, 12, 9, 3, 22, 510000), 'secret': '$2a$08$P4EjqZo9/ALwfK/rDyb7yeZ4vFCUePxkQALChaGiZsxQi33zEdxuS', '__v': 0}
2019-06-13 15:44:01,516 del_mongo.py INFO [line:136] users 表关联的字段为 subject : 75327434-ee89-4065-af0e-eead7185aca7
2019-06-13 15:44:01,516 del_mongo.py INFO [line:137] 正在查询关联表 userdevices 的数据
2019-06-13 15:44:01,569 del_mongo.py INFO [line:66] userdevices 表符合查询条件{'subject': '75327434-ee89-4065-af0e-eead7185aca7'} 的数据有1 条
2019-06-13 15:44:01,676 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00bfde6d85320cb1cde4fb'), 'device_id': '5E041B1C-88C4-4BC7-9723-0AE7B199F15C', 'subject': '75327434-ee89-4065-af0e-eead7185aca7', '__v': 0, 'code': 'c9a4db9a-ce6a-4b73-8a9b-646e0594bc94', 'created_at': datetime.datetime(2019, 6, 12, 9, 3, 26, 70000), 'verified': True}
2019-06-13 15:44:01,676 del_mongo.py INFO [line:152] ***********************************

2019-06-13 15:44:01,677 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-06-13 15:44:01,730 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FADCC40748>
2019-06-13 15:44:01,731 del_mongo.py INFO [line:171] ***********************************

2019-06-13 15:44:01,731 del_mongo.py INFO [line:152] ***********************************

2019-06-13 15:44:01,731 del_mongo.py INFO [line:153] 没有关联数据,直接删除users 表
2019-06-13 15:44:01,785 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FADCBFA5C8>
2019-06-13 15:44:01,785 del_mongo.py INFO [line:171] ***********************************

2019-06-13 15:44:01,785 del_mongo.py INFO [line:152] ***********************************

2019-06-13 15:44:01,785 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-06-13 15:44:01,839 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FADCC45B88>
2019-06-13 15:44:01,839 del_mongo.py INFO [line:171] ***********************************

2019-06-13 15:44:01,839 del_mongo.py INFO [line:152] ***********************************

2019-06-13 15:44:01,839 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-06-13 15:44:01,896 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FADCC45F88>
2019-06-13 15:44:01,896 del_mongo.py INFO [line:171] ***********************************

2019-06-13 15:44:01,896 del_mongo.py INFO [line:37] close Client
2019-06-13 15:44:01,950 del_mongo.py INFO [line:44] users 表预计删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:44] userdevices 表预计删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:51] users 表实际删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:51] userdevices 表实际删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:51] apply_info 表实际删除 1 条记录
2019-06-13 15:44:01,951 del_mongo.py INFO [line:51] apply 表实际删除 1 条记录
