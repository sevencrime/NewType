2019-04-09 17:21:20,246 del_mongo.py INFO [line:27] 连接数据库uat
2019-04-09 17:21:22,268 del_mongo.py INFO [line:45] client_info 表符合查询条件{'email': 'onedi.zheng@newtype.io'} 的数据有1 条
2019-04-09 17:21:22,472 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac584c017f2270d59c34d0'), 'accountId': [ObjectId('5cac584b017f22bf0f9c34cb')], 'applyId': [ObjectId('5cac56623d4d47fa6e7d3e00')], 'clientSeqId': 2809, 'title': 'mrs', 'firstName': 'first', 'lastName': 'last', 'chineseName': 'Test', 'pastEnglishName': '', 'pastChineseName': '', 'email': 'onedi.zheng@newtype.io', 'phone': '7612762533010', 'address': '3466324364', 'addressMail': '34632646345', 'phoneAreaCode': 'HKG', 'nationality': 'CHN', 'idType': '2', 'idNumber': '438423523661', 'countryIssue': 'CHN', 'birthday': 894384000000.0, 'birthPlace': 'CHN', 'employment': 'retired', 'employer': '', 'businessType': '', 'occupation': '', 'businessAddress': '', 'businessPhone': '', 'isMaster': '1', 'parentPath': '/100000/ceo_t1/ro_t1', 'riskInfo': {'passportMaterial': ['publicDropbox/BcPJde9SCkFdFssQaJz9KYRNMbfyYm2t.jpeg'], 'addressVerificationMaterials': ['publicDropbox/8pRBJ8ssFtibKGdF4kw1r6irkijMe9G2.jpeg'], 'bankCardMaterials': ['publicDropbox/NRccBw9hbN2ZXXbfajmrZw4TR17HNS3F.jpeg'], 'referralCode': '', 'isErr': False, 'errText': '', 'otherInformation': [], 'proofOfIncome': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'customerNetAssetValueHK': 'lt1000000', 'sourceOfWealth': ['savings'], 'sourceOfWealthOther': '', 'securities': 'lt1Year', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': 'lt1Year', 'options': 'lt1Year', 'otherInvestment': '', 'otherInvestmentText': '', 'foreignExchange': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isTradingStructureAggree': 'N', 'isApplyToOpenTradingStructure': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': '', 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'hedging', 'riskTolerance': 'low'}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'employedPeriod': '', 'employmentOther': '', 'createdTime': 1554798668384.0, 'updatedTime': 1554798668384.0}
2019-04-09 17:21:22,481 del_mongo.py INFO [line:79] client_info 表关联的字段为 accountId : [ObjectId('5cac584b017f22bf0f9c34cb')]
2019-04-09 17:21:22,481 del_mongo.py INFO [line:80] 正在查询关联表 account 的数据
2019-04-09 17:21:22,581 del_mongo.py INFO [line:45] account 表符合查询条件{'_id': ObjectId('5cac584b017f22bf0f9c34cb')} 的数据有1 条
2019-04-09 17:21:22,768 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac584b017f22bf0f9c34cb'), 'accountType': ['securitiesCash', 'leveragedForeignExchangeAccountMargin', 'futuresMargin', 'securitiesDayTradeMargin', 'bullionMargin'], 'clientId': [ObjectId('5cac584c017f2270d59c34d0')], 'accountNumber': '885521', 'applicationFor': 'individual', 'accountOpeningWay': 'visitingAccount', 'tradeAccountList': [{'_id': ObjectId('5cac584b017f222e149c34cd'), 'type': 'PM', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554798667946.0, 'enabled': True, 'tradeAccount': '885522', 'tradeAccountType': '', 'accountType': 'bullionMargin'}], 'parentPath': '/100000/ceo_t1/ro_t1', 'referralCode': '', 'createBy': '', 'updateBy': '', 'remark': '', 'idpUserId': 'd9b63bf2-e062-42ca-918f-0e3e591f738b', 'createdTime': 1554798667985.0, 'updatedTime': 1554798667985.0}
2019-04-09 17:21:22,769 del_mongo.py INFO [line:96] account 表关联的字段为 idpUserId : d9b63bf2-e062-42ca-918f-0e3e591f738b
2019-04-09 17:21:22,769 del_mongo.py INFO [line:97] 正在查询关联表 users 的数据
2019-04-09 17:21:22,866 del_mongo.py INFO [line:45] users 表符合查询条件{'subject': 'd9b63bf2-e062-42ca-918f-0e3e591f738b'} 的数据有0 条
2019-04-09 17:21:23,064 del_mongo.py INFO [line:111] ***********************************

2019-04-09 17:21:23,064 del_mongo.py INFO [line:112] 没有关联数据,直接删除account 表
2019-04-09 17:21:23,160 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554801685, 1), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554801685, 1), '$clusterTime': {'clusterTime': Timestamp(1554801685, 1), 'signature': {'hash': b'<4=\x0eF?kw\xf9\x97G\x83\xd3@\x7f`\x80\x02\xdcY', 'keyId': 6636138069080670209}}}
2019-04-09 17:21:23,160 del_mongo.py INFO [line:119] ***********************************

2019-04-09 17:21:23,160 del_mongo.py INFO [line:79] client_info 表关联的字段为 applyId : [ObjectId('5cac56623d4d47fa6e7d3e00')]
2019-04-09 17:21:23,160 del_mongo.py INFO [line:80] 正在查询关联表 apply 的数据
2019-04-09 17:21:23,259 del_mongo.py INFO [line:45] apply 表符合查询条件{'_id': ObjectId('5cac56623d4d47fa6e7d3e00')} 的数据有1 条
2019-04-09 17:21:23,477 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac56623d4d47fa6e7d3e00'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'leveragedForeignExchangeAccountMargin', 'futuresMargin', 'securitiesDayTradeMargin', 'bullionMargin'], 'applyInfoIds': [ObjectId('5cac56623d4d47eb4e7d3e1f')], 'learnHow': ['advertising'], 'tradingAuthorization': [], 'isRelatedAccounts': ['HK'], 'step': '', 'origin': '', 'idpUserId': 'd9b63bf2-e062-42ca-918f-0e3e591f738b', 'applicationFor': 'individual', 'parentId': 'ro_t1', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'visitingAccount', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '885521', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'success', 'customerSource': 'crm', 'applySeqId': 1412, 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5cac58003d4d47e4ac7d3e71'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d47ecf77d3e70'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d47ad3f7d3e6f'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d47876a7d3e6e'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d476c0f7d3e6d'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d4707fe7d3e6c'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d4736cb7d3e6b'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d477d2d7d3e6a'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d47c3607d3e69'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d4775827d3e68'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d4784427d3e67'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cac58003d4d476a7d7d3e66'), 'username': 'ro_gold', 'usertype': 'bullionRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '/100000/ceo_t1/ro_t1', 'currency': 'HKD', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': 'EDYL', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5cac56623d4d474e207d3e1d'), 'residenceJurisdiction': '', 'taxId': ''}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'remark': '', 'reason': '', 'principal': '', 'openlocation': '', 'isReSubmit': '', 'signatureFile': '', 'appVersion': '', 'deviceModel': '', 'refuseClients': '', 'refuseBy': '', 'createdTime': 1554798178369.0, 'updatedTime': 1554798178369.0}
2019-04-09 17:21:23,478 del_mongo.py INFO [line:79] apply 表关联的字段为 applyInfoIds : [ObjectId('5cac56623d4d47eb4e7d3e1f')]
2019-04-09 17:21:23,478 del_mongo.py INFO [line:80] 正在查询关联表 apply_info 的数据
2019-04-09 17:21:23,584 del_mongo.py INFO [line:45] apply_info 表符合查询条件{'_id': ObjectId('5cac56623d4d47eb4e7d3e1f')} 的数据有1 条
2019-04-09 17:21:23,807 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac56623d4d47eb4e7d3e1f'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cac56623d4d47fa6e7d3e00'), 'leadId': '', 'isFromLead': False, 'riskInfo': {'passportMaterial': ['publicDropbox/BcPJde9SCkFdFssQaJz9KYRNMbfyYm2t.jpeg'], 'addressVerificationMaterials': ['publicDropbox/8pRBJ8ssFtibKGdF4kw1r6irkijMe9G2.jpeg'], 'bankCardMaterials': ['publicDropbox/NRccBw9hbN2ZXXbfajmrZw4TR17HNS3F.jpeg'], 'referralCode': '', 'isErr': False, 'errText': '', 'otherInformation': [], 'proofOfIncome': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'customerNetAssetValueHK': 'lt1000000', 'sourceOfWealth': ['savings'], 'sourceOfWealthOther': '', 'securities': 'lt1Year', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': 'lt1Year', 'options': 'lt1Year', 'otherInvestment': '', 'otherInvestmentText': '', 'foreignExchange': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isTradingStructureAggree': 'N', 'isApplyToOpenTradingStructure': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': '', 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'hedging', 'riskTolerance': 'low'}, 'title': 'mrs', 'lastName': 'last', 'firstName': 'first', 'chineseName': 'Test', 'pastEnglishName': '', 'pastChineseName': '', 'idType': '2', 'idNumber': '438423523661', 'countryIssue': 'CHN', 'nationality': 'CHN', 'birthPlace': 'CHN', 'birthday': 894384000000.0, 'email': 'onedi.zheng@newtype.io', 'phoneAreaCode': 'HKG', 'phone': '7612762533010', 'address': '3466324364', 'addressMail': '34632646345', 'employment': 'retired', 'employmentOther': '', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessPhone': '', 'idCardAddress': '', 'idTypeOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'idCardAddressReadOnly': '', 'syncIDAddress': '', 'isHongKongBankCard': '', 'createdTime': 1554798178706.0, 'updatedTime': 1554798178706.0}
2019-04-09 17:21:23,807 del_mongo.py INFO [line:111] ***********************************

2019-04-09 17:21:23,807 del_mongo.py INFO [line:112] 没有关联数据,直接删除apply_info 表
2019-04-09 17:21:23,930 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554801685, 2), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554801685, 2), '$clusterTime': {'clusterTime': Timestamp(1554801685, 2), 'signature': {'hash': b'<4=\x0eF?kw\xf9\x97G\x83\xd3@\x7f`\x80\x02\xdcY', 'keyId': 6636138069080670209}}}
2019-04-09 17:21:23,930 del_mongo.py INFO [line:119] ***********************************

2019-04-09 17:21:23,930 del_mongo.py INFO [line:111] ***********************************

2019-04-09 17:21:23,930 del_mongo.py INFO [line:112] 没有关联数据,直接删除apply 表
2019-04-09 17:21:24,050 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554801685, 3), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554801685, 3), '$clusterTime': {'clusterTime': Timestamp(1554801685, 3), 'signature': {'hash': b'<4=\x0eF?kw\xf9\x97G\x83\xd3@\x7f`\x80\x02\xdcY', 'keyId': 6636138069080670209}}}
2019-04-09 17:21:24,050 del_mongo.py INFO [line:119] ***********************************

2019-04-09 17:21:24,050 del_mongo.py INFO [line:111] ***********************************

2019-04-09 17:21:24,050 del_mongo.py INFO [line:112] 没有关联数据,直接删除client_info 表
2019-04-09 17:21:24,163 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554801686, 1), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554801686, 1), '$clusterTime': {'clusterTime': Timestamp(1554801686, 1), 'signature': {'hash': b'/\xed8\xe0\xbc\x13\x80\xd4\x9b\xc0\xc4\xd6\xc1\xa5\x7f\xfb6\xa0\x16\x7f', 'keyId': 6636138069080670209}}}
2019-04-09 17:21:24,164 del_mongo.py INFO [line:119] ***********************************

2019-04-09 17:21:24,164 del_mongo.py INFO [line:33] close Client
