2019-06-05 10:24:33,489 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-05 10:24:38,765 del_mongo.py INFO [line:66] client_info 表符合查询条件{'idNumber': '362501199009243083'} 的数据有0 条
2019-06-05 10:24:38,941 del_mongo.py INFO [line:37] close Client
2019-06-05 10:24:43,842 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-05 10:24:49,118 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'idNumber': '362501199009243083'} 的数据有1 条
2019-06-05 10:24:49,310 del_mongo.py INFO [line:69] {'_id': ObjectId('5cf0a0468ad8db06cc207388'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cf0a0468ad8db223020735b'), 'leadId': '', 'isFromLead': False, 'title': 'miss', 'firstName': 'Lihua', 'lastName': 'Zhou', 'chineseName': '周丽华', 'pastEnglishName': '', 'email': 'yuchen960108@qq.com', 'phoneAreaCode': 'CHN', 'phone': '17674620632', 'address': '江西省抚州市临川区荆公路160号', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '362501199009243083', 'countryIssue': 'CHN', 'birthday': 654105600000.0, 'birthPlace': 'CHN', 'idCardAddress': '江西省抚州市临川区荆公路160号', 'idCardAddressReadOnly': '江西省抚州市临川区荆公路160号', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['238bb135-66e5-4e19-a4eb-2925d89a5e2d.jpg', '104ad4fa-8392-47f1-9e8b-71427ab04f6c.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'N', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['asset'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['ddbb5dce-5f93-4bd3-b58e-2e4c19655f12.jpg'], 'passportMaterialBackup': ['eb17c62d-aa4e-4bd2-a955-cc66c50f3c9e.jpg', '049b047e-3d06-435b-8e68-081c321d380e.jpg'], 'signatureMaterial': ['912e7b0f-87c5-4912-83cf-2af63a9bec8b.jpg'], 'isReferralCode': 'Y', 'passportMaterialBak': ['238bb135-66e5-4e19-a4eb-2925d89a5e2d.jpg', '104ad4fa-8392-47f1-9e8b-71427ab04f6c.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '江西省', 'city': '抚州地区', 'idNo': '362501199009243083', 'userName': '周丽华', 'sex': '女', 'contactAddr': '江西省抚州市临川区荆公路160号', 'birthday': '1990/9/24', 'nationality': '汉', 'cardedPlace': '抚州市公安局临川分局', 'cardedExpiryDate': '20150911-20250911'}, 'createdTime': 1559273542500.0, 'updatedTime': 1559273542500.0}
2019-06-05 10:24:49,313 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5cf0a0468ad8db223020735b
2019-06-05 10:24:49,313 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-06-05 10:24:49,404 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5cf0a0468ad8db223020735b')} 的数据有1 条
2019-06-05 10:24:49,586 del_mongo.py INFO [line:69] {'_id': ObjectId('5cf0a0468ad8db223020735b'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5cf0a0468ad8db06cc207388')], 'learnHow': ['socialMedia'], 'tradingAuthorization': [''], 'tradingAuthorizationBak': [''], 'isRelatedAccounts': ['opt'], 'caApplyErr': ['-32:申请失败,人脸比异常,请确认身份证人头面是否正面放置:2019May31 11:38:16', '[object Object]:2019May31 11:38:19'], 'step': 'success', 'origin': '', 'idpUserId': '167e86bc-4f52-427e-845f-a092b42fd36b', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '招商银行', 'appBankAccount': '6214837873831683', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '', 'personalInfoDeclartion': 'N', 'agreeToTheTerms': 'Y', 'status': 'reviewing', 'customerSource': 'app', 'applySeqId': '8705', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8dbde822075e4'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8dbf4f32075e3'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8dbb19e2075e2'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db16902075e1'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db13842075e0'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db1fe22075df'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db86672075de'), 'username': 'cliff_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8dbafea2075dd'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db44dc2075dc'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db3cc52075db'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db13542075da'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db50042075d9'), 'username': 'aaron_chan', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db6b0b2075d8'), 'username': 'onedi.admin', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db28bc2075d7'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db80482075d6'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8dbaef12075d5'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8dbceba2075d4'), 'username': 'onedi.admin', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db06732075d3'), 'username': 'cliff_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cf0a1ac8ad8db16722075d2'), 'username': 'aaron_chan', 'usertype': 'fouexRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5cf0a1ac8ad8db70e72075e5'), 'taxId': '362501199009243083', 'residenceJurisdiction': 'China'}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5cf0a1ac8ad8dbd3d12075e8'), 'pageNo': 11, 'x': 140, 'y': 208}, {'_id': ObjectId('5cf0a1ac8ad8db77d32075e7'), 'pageNo': 13, 'x': 130, 'y': 118}, {'_id': ObjectId('5cf0a1ac8ad8dbd4402075e6'), 'pageNo': 15, 'x': 130, 'y': 145}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'submitTime': 1559273900182.0, 'createdTime': 1559273542341.0, 'updatedTime': 1559273900182.0, 'remark': '', 'reason': '', 'principal': '', 'appBankPhone': '17674620632', 'appFileId': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': '', 'appVersion': 'v1.4.0', 'deviceModel': 'vivo X9s/Android:7.1.1', 'isContactClient': '', 'reSubmitTime': None, 'LearnHowCodeOps': '', 'isHideGeneratePdfPage': 'N', 'isCommonService': 'Y', 'refuseBy': ''}
2019-06-05 10:24:49,586 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5cf0a0468ad8db06cc207388')]
2019-06-05 10:24:49,586 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-06-05 10:24:49,677 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5cf0a0468ad8db06cc207388')} 的数据有1 条
2019-06-05 10:24:49,857 del_mongo.py INFO [line:69] {'_id': ObjectId('5cf0a0468ad8db06cc207388'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cf0a0468ad8db223020735b'), 'leadId': '', 'isFromLead': False, 'title': 'miss', 'firstName': 'Lihua', 'lastName': 'Zhou', 'chineseName': '周丽华', 'pastEnglishName': '', 'email': 'yuchen960108@qq.com', 'phoneAreaCode': 'CHN', 'phone': '17674620632', 'address': '江西省抚州市临川区荆公路160号', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '362501199009243083', 'countryIssue': 'CHN', 'birthday': 654105600000.0, 'birthPlace': 'CHN', 'idCardAddress': '江西省抚州市临川区荆公路160号', 'idCardAddressReadOnly': '江西省抚州市临川区荆公路160号', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['238bb135-66e5-4e19-a4eb-2925d89a5e2d.jpg', '104ad4fa-8392-47f1-9e8b-71427ab04f6c.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'N', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['asset'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['ddbb5dce-5f93-4bd3-b58e-2e4c19655f12.jpg'], 'passportMaterialBackup': ['eb17c62d-aa4e-4bd2-a955-cc66c50f3c9e.jpg', '049b047e-3d06-435b-8e68-081c321d380e.jpg'], 'signatureMaterial': ['912e7b0f-87c5-4912-83cf-2af63a9bec8b.jpg'], 'isReferralCode': 'Y', 'passportMaterialBak': ['238bb135-66e5-4e19-a4eb-2925d89a5e2d.jpg', '104ad4fa-8392-47f1-9e8b-71427ab04f6c.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '江西省', 'city': '抚州地区', 'idNo': '362501199009243083', 'userName': '周丽华', 'sex': '女', 'contactAddr': '江西省抚州市临川区荆公路160号', 'birthday': '1990/9/24', 'nationality': '汉', 'cardedPlace': '抚州市公安局临川分局', 'cardedExpiryDate': '20150911-20250911'}, 'createdTime': 1559273542500.0, 'updatedTime': 1559273542500.0}
2019-06-05 10:24:49,857 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : 167e86bc-4f52-427e-845f-a092b42fd36b
2019-06-05 10:24:49,857 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-06-05 10:24:49,947 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': '167e86bc-4f52-427e-845f-a092b42fd36b'} 的数据有1 条
2019-06-05 10:24:50,127 del_mongo.py INFO [line:69] {'_id': ObjectId('5cf0a02a8a30223eeb040c3e'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '17674620632', 'email': 'yuchen960108@qq.com', 'phone_number': '8617674620632', 'custom': {'device_id': 'ce9851ed8615e240'}, 'subject': '167e86bc-4f52-427e-845f-a092b42fd36b', 'created_at': datetime.datetime(2019, 5, 31, 3, 31, 54, 603000), 'updated_at': datetime.datetime(2019, 5, 31, 3, 38, 20, 282000), 'secret': '$2a$08$VhYfgO.0A4ZGg8PE7ZCKFeLcyT8nUpPAWe6sp02VkMCbo5OeTukrG', '__v': 0}
2019-06-05 10:24:50,128 del_mongo.py INFO [line:136] users 表关联的字段为 subject : 167e86bc-4f52-427e-845f-a092b42fd36b
2019-06-05 10:24:50,128 del_mongo.py INFO [line:137] 正在查询关联表 userdevices 的数据
2019-06-05 10:24:50,217 del_mongo.py INFO [line:66] userdevices 表符合查询条件{'subject': '167e86bc-4f52-427e-845f-a092b42fd36b'} 的数据有0 条
2019-06-05 10:24:50,398 del_mongo.py INFO [line:152] ***********************************

2019-06-05 10:24:50,398 del_mongo.py INFO [line:153] 没有关联数据,直接删除users 表
2019-06-05 10:24:50,781 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FBB7490788>
2019-06-05 10:24:50,781 del_mongo.py INFO [line:171] ***********************************

2019-06-05 10:24:50,781 del_mongo.py INFO [line:152] ***********************************

2019-06-05 10:24:50,781 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-06-05 10:24:50,871 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FBB74A4F88>
2019-06-05 10:24:50,871 del_mongo.py INFO [line:171] ***********************************

2019-06-05 10:24:50,872 del_mongo.py INFO [line:152] ***********************************

2019-06-05 10:24:50,872 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-06-05 10:24:50,966 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001FBB74A0B08>
2019-06-05 10:24:50,966 del_mongo.py INFO [line:171] ***********************************

2019-06-05 10:24:50,966 del_mongo.py INFO [line:37] close Client
2019-06-05 10:24:51,057 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-06-05 10:24:51,057 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-06-05 10:24:51,057 del_mongo.py INFO [line:44] users 表预计删除 1 条记录
2019-06-05 10:24:51,057 del_mongo.py INFO [line:51] apply 表实际删除 1 条记录
2019-06-05 10:24:51,057 del_mongo.py INFO [line:51] apply_info 表实际删除 1 条记录
2019-06-05 10:24:51,057 del_mongo.py INFO [line:51] users 表实际删除 1 条记录
