2019-07-09 18:00:34,921 del_mongo.py INFO [line:31] 连接数据库uat
2019-07-09 18:00:39,887 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'phone': '15815873756'} 的数据有1 条
2019-07-09 18:00:40,008 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22ae02b652a2f2c2638eb8'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d22ae02b652a24b10638e9e'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Huajun', 'lastName': 'Deng', 'chineseName': '邓华俊', 'pastEnglishName': '', 'email': '794942392@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15815873756', 'address': '湖南省祁阳县大忠桥镇镰头湾村4组', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '431121199601081731', 'countryIssue': 'CHN', 'birthday': 821491200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省祁阳县大忠桥镇镰头湾村4组', 'idCardAddressReadOnly': '湖南省祁阳县大忠桥镇镰头湾村4组', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': '', 'isTradingStructureAggree': 'N', 'disclaimerVideo': '', 'passportMaterial': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '歪歪', 'otherInvestment': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['hedging', 'asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'passportMaterialBackup': ['52bb2df3-bf4f-4331-86ae-ebdffa445eea.jpg', 'c71eca11-9c53-4980-b89d-91a7141f6354.jpg'], 'signatureMaterial': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'identityAuthenticationImgBak': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'signatureMaterialBak': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'writtenApplicationMaterialsBak': ['8eac8090-a131-11e9-a87e-3d4b4cf9272a.pdf']}, 'createdTime': 1562553858775.0, 'updatedTime': 1562553858775.0, 'ocrInfo': {'province': '湖南省', 'city': '永州市', 'idNo': '441581199607304713', 'userName': '林国波', 'sex': '男', 'contactAddr': '广东省汕尾市城区香洲街道祯祥街十六巷2号', 'birthday': '1996/7/30', 'nationality': '汉', 'cardedPlace': '祁阳县公安局', 'cardedExpiryDate': '20160129-20260129'}}
2019-07-09 18:00:40,016 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5d22ae02b652a24b10638e9e
2019-07-09 18:00:40,016 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-07-09 18:00:40,077 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5d22ae02b652a24b10638e9e')} 的数据有1 条
2019-07-09 18:00:40,199 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22ae02b652a24b10638e9e'), 'isRoRefuse': 'N', 'accountType': ['futuresMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5d22ae02b652a2f2c2638eb8')], 'learnHow': ['advertising', 'friend', 'socialMedia'], 'tradingAuthorization': [], 'tradingAuthorizationBak': [], 'isRelatedAccounts': ['opt'], 'caApplyErr': [], 'reviewTime': ['{"cs1":"1562653631298,96826709"}'], 'step': 'success', 'origin': '', 'idpUserId': 'bf655e47-7630-43c6-8d96-e07174a3a711', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '招商银行', 'appBankAccount': '6214837879939035', 'appCertSn': '4BF3957F4416E2D6', 'appCertDn': 'CN=邓华俊,OU=431121199601081731,OU=115,O=0,L=永州市,ST=湖南省,C=CN', 'personalInfoDeclartion': 'N', 'agreeToTheTerms': 'Y', 'status': 'refuse', 'customerSource': 'app', 'applySeqId': '9165', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5d24659fdbcc1b321cd74f8a'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b5dd2d74f89'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1bab07d74f88'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b8ea4d74f87'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b6a68d74f86'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b0d87d74f85'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b57add74f84'), 'username': 'cliff_test', 'usertype': 'futuressRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': 'edzq12', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5d24659fdbcc1bd6c1d74f8b'), 'taxId': '431121199601081731', 'residenceJurisdiction': 'China'}], 'referralCode': '2001012', 'signatureCoords': [{'_id': ObjectId('5d24659fdbcc1bb043d74f8d'), 'pageNo': 11, 'x': 140, 'y': 274}, {'_id': ObjectId('5d24659fdbcc1bbe6bd74f8c'), 'pageNo': 13, 'x': 130, 'y': 118}], 'signatureSize': {'xDpi': '660', 'yDpi': '660'}, 'createdTime': 1562553858674.0, 'updatedTime': 1562666396246.0, 'appBankPhone': '15815873756', 'appFileId': '201907091759505950951162', 'appVersion': 'v1.6.0', 'deviceModel': 'iPhone 6s/iOS:12.0', 'isCommonService': 'Y', 'isHideGeneratePdfPage': 'N', 'isReSubmit': 'Y', 'submitTime': 1562556804589.0, 'isContactClient': 'N', 'reason': {'applyInfo': ['applicationFor', 'accountOpeningWay', 'parentId', 'mailLanguage', 'referralCode', 'accountType'], 'primaryInfo': ['title', 'firstName', 'lastName', 'chineseName', 'pastEnglishName', 'pastChineseName', 'email', 'phone', 'address', 'addressMail', 'nationality', 'idType', 'idNumber', 'countryIssue', 'birthday', 'birthPlace'], 'employedInfo': ['occupation', 'employment', 'employedPeriod', 'employer', 'businessType', 'businessAddress', 'businessPhone'], 'principalAccountHolderCertificationInformation': ['passportMaterial', 'addressVerificationMaterials', 'writtenApplicationMaterials', 'bankCardMaterials', 'proofOfIncome', 'otherInformation', 'disclaimerVideo'], 'financialInformation': ['totalAnnualCustomerRevenueHK', 'customerNetAssetValueHK', 'sourceOfWealth'], 'customerInvestmentExperience': ['securities', 'CBBC', 'warrants', 'futures', 'options', 'foreignExchange', 'otherInvestmentText'], 'knowTheProduct': ['isLearnAboutProducts', 'isIndustryExperience', 'isStocks', 'isApplyToOpenTradingStructure'], 'otherCustomerInformation': ['isBankruptcy', 'isInAgtJobs', 'isBondFuturesClientsConnected', 'isAcquaintHighLevel', 'isAmericanResidents', 'isAmericanResidentsb', 'isPoliticalFigure', 'purposeOfInvestment', 'riskTolerance'], 'settlementAccountInformation': ['currency'], 'relatedMarginFinancingAccount': ['isMarginAccount', 'isDiscretion', 'isCompanyAccounts'], 'identityDeclaration': ['isBeneficiary', 'isOrders'], 'identificationNumberOfTheSameFunction': ['isRelatedAccounts'], 'introductionAndPromotion': ['learnHow', 'learnHowCode'], 'other': ['szca']}, 'refuseBy': {'name': 'cs1_t2', 'role': 'cs1'}, 'remark': 'it_test'}
2019-07-09 18:00:40,200 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5d22ae02b652a2f2c2638eb8')]
2019-07-09 18:00:40,200 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-07-09 18:00:40,262 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5d22ae02b652a2f2c2638eb8')} 的数据有1 条
2019-07-09 18:00:40,392 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22ae02b652a2f2c2638eb8'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d22ae02b652a24b10638e9e'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Huajun', 'lastName': 'Deng', 'chineseName': '邓华俊', 'pastEnglishName': '', 'email': '794942392@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15815873756', 'address': '湖南省祁阳县大忠桥镇镰头湾村4组', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '431121199601081731', 'countryIssue': 'CHN', 'birthday': 821491200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省祁阳县大忠桥镇镰头湾村4组', 'idCardAddressReadOnly': '湖南省祁阳县大忠桥镇镰头湾村4组', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': '', 'isTradingStructureAggree': 'N', 'disclaimerVideo': '', 'passportMaterial': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '歪歪', 'otherInvestment': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['hedging', 'asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'passportMaterialBackup': ['52bb2df3-bf4f-4331-86ae-ebdffa445eea.jpg', 'c71eca11-9c53-4980-b89d-91a7141f6354.jpg'], 'signatureMaterial': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'identityAuthenticationImgBak': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'signatureMaterialBak': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'writtenApplicationMaterialsBak': ['8eac8090-a131-11e9-a87e-3d4b4cf9272a.pdf']}, 'createdTime': 1562553858775.0, 'updatedTime': 1562553858775.0, 'ocrInfo': {'province': '湖南省', 'city': '永州市', 'idNo': '441581199607304713', 'userName': '林国波', 'sex': '男', 'contactAddr': '广东省汕尾市城区香洲街道祯祥街十六巷2号', 'birthday': '1996/7/30', 'nationality': '汉', 'cardedPlace': '祁阳县公安局', 'cardedExpiryDate': '20160129-20260129'}}
2019-07-09 18:00:40,392 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : bf655e47-7630-43c6-8d96-e07174a3a711
2019-07-09 18:00:40,392 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-07-09 18:00:40,459 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711'} 的数据有1 条
2019-07-09 18:00:40,596 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1f0916277a40a3a16a542f'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15815873756', 'email': '15815873756@toBeCreated.com', 'phone_number': '8615815873756', 'custom': {'device_id': '89227da768824ff5'}, 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', 'created_at': datetime.datetime(2019, 7, 5, 8, 23, 49, 387000), 'updated_at': datetime.datetime(2019, 7, 5, 8, 23, 49, 387000), 'secret': '$2a$08$.ZXgRHc/NrDWpJcLEkylXepxzNyt2UmsQdmq5For/wU6TlOhQS3Za', '__v': 0}
2019-07-09 18:00:40,596 del_mongo.py INFO [line:136] users 表关联的字段为 subject : bf655e47-7630-43c6-8d96-e07174a3a711
2019-07-09 18:00:40,596 del_mongo.py INFO [line:137] 正在查询关联表 userdevices 的数据
2019-07-09 18:00:40,666 del_mongo.py INFO [line:66] userdevices 表符合查询条件{'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711'} 的数据有3 条
2019-07-09 18:00:40,796 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22aded6fb61c097d9bb417'), 'device_id': '89227da768824ff5', 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', '__v': 0, 'code': '66fe1b8b-47a6-45af-b36f-e35d530738a2', 'created_at': datetime.datetime(2019, 7, 8, 2, 43, 57, 831000), 'verified': True}
2019-07-09 18:00:40,796 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:40,796 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-09 18:00:40,796 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:40,796 del_mongo.py INFO [line:69] {'_id': ObjectId('5d24336c6fb61c097db6f68f'), 'device_id': '2054b8ec62726049', 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', '__v': 0, 'code': '33fbd961-fb25-4fd1-ad5c-2f6a7a277560', 'created_at': datetime.datetime(2019, 7, 9, 6, 25, 48, 361000), 'verified': True}
2019-07-09 18:00:40,796 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-09 18:00:40,797 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:69] {'_id': ObjectId('5d2465426fb61c097dbc0d58'), 'device_id': '9C882699-82C7-4E89-A118-059F82EB2B85', 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', '__v': 0, 'code': 'dc145a22-2714-4e4e-a53d-acf291ea181c', 'created_at': datetime.datetime(2019, 7, 9, 9, 58, 26, 99000), 'verified': True}
2019-07-09 18:00:40,797 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-09 18:00:40,797 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:153] 没有关联数据,直接删除users 表
2019-07-09 18:00:40,797 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:40,797 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-07-09 18:00:40,798 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:40,798 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:40,798 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-07-09 18:00:40,798 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:40,798 del_mongo.py INFO [line:37] close Client
2019-07-09 18:00:40,858 del_mongo.py INFO [line:44] userdevices 表预计删除 3 条记录
2019-07-09 18:00:40,858 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-07-09 18:00:40,858 del_mongo.py INFO [line:44] users 表预计删除 1 条记录
2019-07-09 18:00:40,858 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-07-09 18:00:42,135 del_mongo.py INFO [line:31] 连接数据库uat
2019-07-09 18:00:47,125 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'phone': '15815873756'} 的数据有1 条
2019-07-09 18:00:47,277 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22ae02b652a2f2c2638eb8'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d22ae02b652a24b10638e9e'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Huajun', 'lastName': 'Deng', 'chineseName': '邓华俊', 'pastEnglishName': '', 'email': '794942392@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15815873756', 'address': '湖南省祁阳县大忠桥镇镰头湾村4组', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '431121199601081731', 'countryIssue': 'CHN', 'birthday': 821491200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省祁阳县大忠桥镇镰头湾村4组', 'idCardAddressReadOnly': '湖南省祁阳县大忠桥镇镰头湾村4组', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': '', 'isTradingStructureAggree': 'N', 'disclaimerVideo': '', 'passportMaterial': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '歪歪', 'otherInvestment': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['hedging', 'asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'passportMaterialBackup': ['52bb2df3-bf4f-4331-86ae-ebdffa445eea.jpg', 'c71eca11-9c53-4980-b89d-91a7141f6354.jpg'], 'signatureMaterial': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'identityAuthenticationImgBak': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'signatureMaterialBak': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'writtenApplicationMaterialsBak': ['8eac8090-a131-11e9-a87e-3d4b4cf9272a.pdf']}, 'createdTime': 1562553858775.0, 'updatedTime': 1562553858775.0, 'ocrInfo': {'province': '湖南省', 'city': '永州市', 'idNo': '441581199607304713', 'userName': '林国波', 'sex': '男', 'contactAddr': '广东省汕尾市城区香洲街道祯祥街十六巷2号', 'birthday': '1996/7/30', 'nationality': '汉', 'cardedPlace': '祁阳县公安局', 'cardedExpiryDate': '20160129-20260129'}}
2019-07-09 18:00:47,277 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5d22ae02b652a24b10638e9e
2019-07-09 18:00:47,277 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-07-09 18:00:47,359 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5d22ae02b652a24b10638e9e')} 的数据有1 条
2019-07-09 18:00:47,511 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22ae02b652a24b10638e9e'), 'isRoRefuse': 'N', 'accountType': ['futuresMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5d22ae02b652a2f2c2638eb8')], 'learnHow': ['advertising', 'friend', 'socialMedia'], 'tradingAuthorization': [], 'tradingAuthorizationBak': [], 'isRelatedAccounts': ['opt'], 'caApplyErr': [], 'reviewTime': ['{"cs1":"1562653631298,96826709"}'], 'step': 'success', 'origin': '', 'idpUserId': 'bf655e47-7630-43c6-8d96-e07174a3a711', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '招商银行', 'appBankAccount': '6214837879939035', 'appCertSn': '4BF3957F4416E2D6', 'appCertDn': 'CN=邓华俊,OU=431121199601081731,OU=115,O=0,L=永州市,ST=湖南省,C=CN', 'personalInfoDeclartion': 'N', 'agreeToTheTerms': 'Y', 'status': 'refuse', 'customerSource': 'app', 'applySeqId': '9165', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5d24659fdbcc1b321cd74f8a'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b5dd2d74f89'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1bab07d74f88'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b8ea4d74f87'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b6a68d74f86'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b0d87d74f85'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d24659fdbcc1b57add74f84'), 'username': 'cliff_test', 'usertype': 'futuressRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': 'edzq12', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5d24659fdbcc1bd6c1d74f8b'), 'taxId': '431121199601081731', 'residenceJurisdiction': 'China'}], 'referralCode': '2001012', 'signatureCoords': [{'_id': ObjectId('5d24659fdbcc1bb043d74f8d'), 'pageNo': 11, 'x': 140, 'y': 274}, {'_id': ObjectId('5d24659fdbcc1bbe6bd74f8c'), 'pageNo': 13, 'x': 130, 'y': 118}], 'signatureSize': {'xDpi': '660', 'yDpi': '660'}, 'createdTime': 1562553858674.0, 'updatedTime': 1562666396246.0, 'appBankPhone': '15815873756', 'appFileId': '201907091759505950951162', 'appVersion': 'v1.6.0', 'deviceModel': 'iPhone 6s/iOS:12.0', 'isCommonService': 'Y', 'isHideGeneratePdfPage': 'N', 'isReSubmit': 'Y', 'submitTime': 1562556804589.0, 'isContactClient': 'N', 'reason': {'applyInfo': ['applicationFor', 'accountOpeningWay', 'parentId', 'mailLanguage', 'referralCode', 'accountType'], 'primaryInfo': ['title', 'firstName', 'lastName', 'chineseName', 'pastEnglishName', 'pastChineseName', 'email', 'phone', 'address', 'addressMail', 'nationality', 'idType', 'idNumber', 'countryIssue', 'birthday', 'birthPlace'], 'employedInfo': ['occupation', 'employment', 'employedPeriod', 'employer', 'businessType', 'businessAddress', 'businessPhone'], 'principalAccountHolderCertificationInformation': ['passportMaterial', 'addressVerificationMaterials', 'writtenApplicationMaterials', 'bankCardMaterials', 'proofOfIncome', 'otherInformation', 'disclaimerVideo'], 'financialInformation': ['totalAnnualCustomerRevenueHK', 'customerNetAssetValueHK', 'sourceOfWealth'], 'customerInvestmentExperience': ['securities', 'CBBC', 'warrants', 'futures', 'options', 'foreignExchange', 'otherInvestmentText'], 'knowTheProduct': ['isLearnAboutProducts', 'isIndustryExperience', 'isStocks', 'isApplyToOpenTradingStructure'], 'otherCustomerInformation': ['isBankruptcy', 'isInAgtJobs', 'isBondFuturesClientsConnected', 'isAcquaintHighLevel', 'isAmericanResidents', 'isAmericanResidentsb', 'isPoliticalFigure', 'purposeOfInvestment', 'riskTolerance'], 'settlementAccountInformation': ['currency'], 'relatedMarginFinancingAccount': ['isMarginAccount', 'isDiscretion', 'isCompanyAccounts'], 'identityDeclaration': ['isBeneficiary', 'isOrders'], 'identificationNumberOfTheSameFunction': ['isRelatedAccounts'], 'introductionAndPromotion': ['learnHow', 'learnHowCode'], 'other': ['szca']}, 'refuseBy': {'name': 'cs1_t2', 'role': 'cs1'}, 'remark': 'it_test'}
2019-07-09 18:00:47,511 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5d22ae02b652a2f2c2638eb8')]
2019-07-09 18:00:47,511 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-07-09 18:00:47,579 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5d22ae02b652a2f2c2638eb8')} 的数据有1 条
2019-07-09 18:00:47,728 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22ae02b652a2f2c2638eb8'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d22ae02b652a24b10638e9e'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Huajun', 'lastName': 'Deng', 'chineseName': '邓华俊', 'pastEnglishName': '', 'email': '794942392@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15815873756', 'address': '湖南省祁阳县大忠桥镇镰头湾村4组', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '431121199601081731', 'countryIssue': 'CHN', 'birthday': 821491200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省祁阳县大忠桥镇镰头湾村4组', 'idCardAddressReadOnly': '湖南省祁阳县大忠桥镇镰头湾村4组', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': '', 'isTradingStructureAggree': 'N', 'disclaimerVideo': '', 'passportMaterial': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '歪歪', 'otherInvestment': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['hedging', 'asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'passportMaterialBackup': ['52bb2df3-bf4f-4331-86ae-ebdffa445eea.jpg', 'c71eca11-9c53-4980-b89d-91a7141f6354.jpg'], 'signatureMaterial': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['781ecf5b-1161-4f2c-b21b-aa40584a425a.jpg', '2e6f11a1-de6a-414d-8afb-c02d6099484d.jpg'], 'identityAuthenticationImgBak': ['fcd422ec-7778-49ce-a95c-eb6ac9198888.jpg'], 'signatureMaterialBak': ['2d171220-5273-45a4-a1a2-0a97d2fb3e53.jpg'], 'writtenApplicationMaterialsBak': ['8eac8090-a131-11e9-a87e-3d4b4cf9272a.pdf']}, 'createdTime': 1562553858775.0, 'updatedTime': 1562553858775.0, 'ocrInfo': {'province': '湖南省', 'city': '永州市', 'idNo': '441581199607304713', 'userName': '林国波', 'sex': '男', 'contactAddr': '广东省汕尾市城区香洲街道祯祥街十六巷2号', 'birthday': '1996/7/30', 'nationality': '汉', 'cardedPlace': '祁阳县公安局', 'cardedExpiryDate': '20160129-20260129'}}
2019-07-09 18:00:47,728 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : bf655e47-7630-43c6-8d96-e07174a3a711
2019-07-09 18:00:47,728 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-07-09 18:00:47,804 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711'} 的数据有1 条
2019-07-09 18:00:47,952 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1f0916277a40a3a16a542f'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15815873756', 'email': '15815873756@toBeCreated.com', 'phone_number': '8615815873756', 'custom': {'device_id': '89227da768824ff5'}, 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', 'created_at': datetime.datetime(2019, 7, 5, 8, 23, 49, 387000), 'updated_at': datetime.datetime(2019, 7, 5, 8, 23, 49, 387000), 'secret': '$2a$08$.ZXgRHc/NrDWpJcLEkylXepxzNyt2UmsQdmq5For/wU6TlOhQS3Za', '__v': 0}
2019-07-09 18:00:47,953 del_mongo.py INFO [line:136] users 表关联的字段为 subject : bf655e47-7630-43c6-8d96-e07174a3a711
2019-07-09 18:00:47,953 del_mongo.py INFO [line:137] 正在查询关联表 userdevices 的数据
2019-07-09 18:00:48,029 del_mongo.py INFO [line:66] userdevices 表符合查询条件{'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711'} 的数据有3 条
2019-07-09 18:00:48,172 del_mongo.py INFO [line:69] {'_id': ObjectId('5d22aded6fb61c097d9bb417'), 'device_id': '89227da768824ff5', 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', '__v': 0, 'code': '66fe1b8b-47a6-45af-b36f-e35d530738a2', 'created_at': datetime.datetime(2019, 7, 8, 2, 43, 57, 831000), 'verified': True}
2019-07-09 18:00:48,172 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:48,172 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-09 18:00:48,245 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000281261D7CC8>
2019-07-09 18:00:48,246 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:48,246 del_mongo.py INFO [line:69] {'_id': ObjectId('5d24336c6fb61c097db6f68f'), 'device_id': '2054b8ec62726049', 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', '__v': 0, 'code': '33fbd961-fb25-4fd1-ad5c-2f6a7a277560', 'created_at': datetime.datetime(2019, 7, 9, 6, 25, 48, 361000), 'verified': True}
2019-07-09 18:00:48,246 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:48,246 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-09 18:00:48,316 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000281261D7F88>
2019-07-09 18:00:48,316 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:48,316 del_mongo.py INFO [line:69] {'_id': ObjectId('5d2465426fb61c097dbc0d58'), 'device_id': '9C882699-82C7-4E89-A118-059F82EB2B85', 'subject': 'bf655e47-7630-43c6-8d96-e07174a3a711', '__v': 0, 'code': 'dc145a22-2714-4e4e-a53d-acf291ea181c', 'created_at': datetime.datetime(2019, 7, 9, 9, 58, 26, 99000), 'verified': True}
2019-07-09 18:00:48,316 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:48,316 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-09 18:00:48,379 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000281261C0708>
2019-07-09 18:00:48,379 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:48,379 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:48,379 del_mongo.py INFO [line:153] 没有关联数据,直接删除users 表
2019-07-09 18:00:48,452 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000281261D0908>
2019-07-09 18:00:48,452 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:48,452 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:48,452 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-07-09 18:00:48,527 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000281261C0708>
2019-07-09 18:00:48,527 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:48,527 del_mongo.py INFO [line:152] ***********************************

2019-07-09 18:00:48,527 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-07-09 18:00:48,601 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000281261D0F88>
2019-07-09 18:00:48,601 del_mongo.py INFO [line:171] ***********************************

2019-07-09 18:00:48,601 del_mongo.py INFO [line:37] close Client
2019-07-09 18:00:48,667 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:44] userdevices 表预计删除 3 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:44] users 表预计删除 1 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:51] apply 表实际删除 1 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:51] apply_info 表实际删除 1 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:51] userdevices 表实际删除 3 条记录
2019-07-09 18:00:48,668 del_mongo.py INFO [line:51] users 表实际删除 1 条记录
