2019-06-12 15:53:16,332 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-12 15:53:17,761 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'idpUserId': 'da127ecc-41e9-4d83-a0ef-86e5ccbdce85'} 的数据有0 条
2019-06-12 15:53:18,014 del_mongo.py INFO [line:37] close Client
2019-06-12 15:53:25,015 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-12 15:53:26,735 del_mongo.py INFO [line:66] apply 表符合查询条件{'idpUserId': 'da127ecc-41e9-4d83-a0ef-86e5ccbdce85'} 的数据有1 条
2019-06-12 15:53:26,951 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00ad34c0fd1ee235ba347a'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5d00ad35c0fd1e70c9ba34a7')], 'learnHow': [], 'tradingAuthorization': [''], 'tradingAuthorizationBak': [''], 'isRelatedAccounts': ['opt'], 'caApplyErr': [], 'reviewTime': [], 'step': 'IdentityInformation', 'origin': '', 'idpUserId': 'da127ecc-41e9-4d83-a0ef-86e5ccbdce85', 'applicationFor': 'individual', 'parentId': '', 'IBparentId': '', 'mailLanguage': '', 'accountOpeningWay': 'electronicAuth', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '', 'personalInfoDeclartion': 'N', 'agreeToTheTerms': '', 'status': 'notComplete', 'customerSource': 'app', 'applySeqId': '8824', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e88a4ba34e8'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e456eba34e7'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e59e3ba34e6'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1ec87bba34e5'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1ef02dba34e4'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e5164ba34e3'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e2a63ba34e2'), 'username': 'cliff_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e2f62ba34e1'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e5b6cba34e0'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e4e03ba34df'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e698aba34de'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e3a11ba34dd'), 'username': 'aaron_chan', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e22b6ba34dc'), 'username': 'onedi.admin', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e7e5bba34db'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e7ab5ba34da'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e5bbfba34d9'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1ea9dbba34d8'), 'username': 'onedi.admin', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1eb90cba34d7'), 'username': 'cliff_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e7815ba34d6'), 'username': 'aaron_chan', 'usertype': 'fouexRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '', 'learnHowOther': '', 'isBeneficiary': '', 'beneficiaryName': '', 'isOrders': '', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5d00ad58c0fd1e3e45ba34e9'), 'taxId': '', 'residenceJurisdiction': 'China'}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}, {'_id': ObjectId('5cc550fbe0d90d746063bac7'), 'pageNo': 15, 'x': 130, 'y': 185}, {'_id': ObjectId('5cc55141e0d90d746063bac8'), 'pageNo': 17, 'x': 130, 'y': 185}], 'signatureSize': {'xDpi': '660', 'yDpi': '660'}, 'submitTime': None, 'createdTime': 1560325429031.0, 'updatedTime': 1560325464439.0, 'remark': '', 'reason': '', 'principal': '', 'appBankPhone': '', 'appFileId': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': '', 'appVersion': 'v1.4.0', 'deviceModel': 'iPhone 6s Plus/iOS:10.3.3', 'isContactClient': '', 'reSubmitTime': None, 'LearnHowCodeOps': '', 'isHideGeneratePdfPage': 'N', 'isCommonService': 'Y', 'refuseBy': ''}
2019-06-12 15:53:26,951 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5d00ad35c0fd1e70c9ba34a7')]
2019-06-12 15:53:26,952 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-06-12 15:53:27,047 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5d00ad35c0fd1e70c9ba34a7')} 的数据有1 条
2019-06-12 15:53:27,261 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00ad35c0fd1e70c9ba34a7'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d00ad34c0fd1ee235ba347a'), 'leadId': '', 'isFromLead': False, 'title': '', 'firstName': '', 'lastName': '', 'chineseName': '', 'pastEnglishName': '', 'email': '', 'phoneAreaCode': 'CHN', 'phone': '', 'address': '', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '', 'countryIssue': 'CHN', 'birthday': None, 'birthPlace': 'CHN', 'idCardAddress': '', 'idCardAddressReadOnly': '', 'employment': '', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': '', 'isTradingStructureAggree': 'N', 'disclaimerVideo': '', 'passportMaterial': [], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': '', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': '', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': [], 'securities': '', 'CBBC': '', 'warrants': '', 'futures': '', 'options': '', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': '', 'isIndustryExperience': '', 'isStocks': '', 'isBankruptcy': '', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': '', 'agtPosition': '', 'isBondFuturesClientsConnected': '', 'agtName': '', 'isAcquaintHighLevel': '', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': '', 'americanResidentsTaxId': '', 'isAmericanResidentsb': '', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': '', 'politicalFigureName': '', 'purposeOfInvestment': '', 'riskTolerance': 'high', 'identityAuthenticationImg': [], 'passportMaterialBackup': [None, None], 'signatureMaterial': [], 'isReferralCode': 'Y'}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {}, 'createdTime': 1560325429129.0, 'updatedTime': 1560325429129.0}
2019-06-12 15:53:27,261 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5d00ad34c0fd1ee235ba347a
2019-06-12 15:53:27,262 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-06-12 15:53:27,700 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5d00ad34c0fd1ee235ba347a')} 的数据有1 条
2019-06-12 15:53:27,912 del_mongo.py INFO [line:69] {'_id': ObjectId('5d00ad34c0fd1ee235ba347a'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5d00ad35c0fd1e70c9ba34a7')], 'learnHow': [], 'tradingAuthorization': [''], 'tradingAuthorizationBak': [''], 'isRelatedAccounts': ['opt'], 'caApplyErr': [], 'reviewTime': [], 'step': 'IdentityInformation', 'origin': '', 'idpUserId': 'da127ecc-41e9-4d83-a0ef-86e5ccbdce85', 'applicationFor': 'individual', 'parentId': '', 'IBparentId': '', 'mailLanguage': '', 'accountOpeningWay': 'electronicAuth', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '', 'personalInfoDeclartion': 'N', 'agreeToTheTerms': '', 'status': 'notComplete', 'customerSource': 'app', 'applySeqId': '8824', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e88a4ba34e8'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e456eba34e7'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e59e3ba34e6'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1ec87bba34e5'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1ef02dba34e4'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e5164ba34e3'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e2a63ba34e2'), 'username': 'cliff_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e2f62ba34e1'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e5b6cba34e0'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e4e03ba34df'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e698aba34de'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e3a11ba34dd'), 'username': 'aaron_chan', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e22b6ba34dc'), 'username': 'onedi.admin', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e7e5bba34db'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e7ab5ba34da'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e5bbfba34d9'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1ea9dbba34d8'), 'username': 'onedi.admin', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1eb90cba34d7'), 'username': 'cliff_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5d00ad58c0fd1e7815ba34d6'), 'username': 'aaron_chan', 'usertype': 'fouexRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '', 'learnHowOther': '', 'isBeneficiary': '', 'beneficiaryName': '', 'isOrders': '', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5d00ad58c0fd1e3e45ba34e9'), 'taxId': '', 'residenceJurisdiction': 'China'}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}, {'_id': ObjectId('5cc550fbe0d90d746063bac7'), 'pageNo': 15, 'x': 130, 'y': 185}, {'_id': ObjectId('5cc55141e0d90d746063bac8'), 'pageNo': 17, 'x': 130, 'y': 185}], 'signatureSize': {'xDpi': '660', 'yDpi': '660'}, 'submitTime': None, 'createdTime': 1560325429031.0, 'updatedTime': 1560325464439.0, 'remark': '', 'reason': '', 'principal': '', 'appBankPhone': '', 'appFileId': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': '', 'appVersion': 'v1.4.0', 'deviceModel': 'iPhone 6s Plus/iOS:10.3.3', 'isContactClient': '', 'reSubmitTime': None, 'LearnHowCodeOps': '', 'isHideGeneratePdfPage': 'N', 'isCommonService': 'Y', 'refuseBy': ''}
2019-06-12 15:53:27,912 del_mongo.py INFO [line:152] ***********************************

2019-06-12 15:53:27,912 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-06-12 15:53:28,003 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x0000022C0FC7A188>
2019-06-12 15:53:28,003 del_mongo.py INFO [line:171] ***********************************

2019-06-12 15:53:28,003 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : da127ecc-41e9-4d83-a0ef-86e5ccbdce85
2019-06-12 15:53:28,003 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-06-12 15:53:28,096 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': 'da127ecc-41e9-4d83-a0ef-86e5ccbdce85'} 的数据有0 条
2019-06-12 15:53:28,310 del_mongo.py INFO [line:152] ***********************************

2019-06-12 15:53:28,310 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-06-12 15:53:28,428 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x0000022C0FC7A208>
2019-06-12 15:53:28,429 del_mongo.py INFO [line:171] ***********************************

2019-06-12 15:53:28,429 del_mongo.py INFO [line:37] close Client
2019-06-12 15:53:28,546 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-06-12 15:53:28,546 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-06-12 15:53:28,546 del_mongo.py INFO [line:51] apply 表实际删除 1 条记录
2019-06-12 15:53:28,546 del_mongo.py INFO [line:51] apply_info 表实际删除 1 条记录
