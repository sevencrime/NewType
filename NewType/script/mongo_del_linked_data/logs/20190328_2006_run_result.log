2019-03-28 20:06:05,750 del_mongo.py INFO [line:27] 连接数据库uat
2019-03-28 20:06:14,748 del_mongo.py INFO [line:45] apply_info 表符合查询条件{'idNumber': '441502199602120215'} 的数据有1 条
2019-03-28 20:06:15,254 del_mongo.py INFO [line:49] {'_id': ObjectId('5c9cab18b80aaa46decba23d'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5c9cab17b80aaa8164cba222'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Qinyuan', 'lastName': 'Zheng', 'chineseName': '郑钦元', 'pastEnglishName': '', 'email': 'onedi@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15089514626', 'address': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号01', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '441502199602120215', 'countryIssue': 'CHN', 'birthday': 824083200000.0, 'birthPlace': 'CHN', 'idCardAddress': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号01', 'idCardAddressReadOnly': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号01', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'N', 'isTradingStructureAggree': 'N', 'disclaimerVideo': 'df4ff4fc-177a-4e99-89d8-5a7085e95f2e.mp4', 'passportMaterial': ['6137710b-1f00-4b8e-a74d-fbd67d27ecd1.jpg', '34fb2666-df75-4973-80d2-6194b9120cbd.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': ['fc7a658e-a57a-43f4-95a1-35980f6d4054.pdf'], 'proofOfIncome': ['0d4563b7-7b12-4292-b63e-4b93cb9d3817.jpg'], 'otherInformation': ['89df9429-f96d-4f8e-804d-cfd70d861e12.jpg'], 'totalAnnualCustomerRevenueHK': 'gt1000000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'gt8000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'pension'], 'securities': 'gt10Years', 'CBBC': 'gt10Years', 'warrants': 'gt10Years', 'futures': 'gt10Years', 'options': 'gt10Years', 'bullion': '', 'foreignExchange': '6To10Years', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'N', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'speculation', 'riskTolerance': 'high'}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'createdTime': 1553771288273.0, 'updatedTime': 1553771288273.0}
2019-03-28 20:06:15,255 del_mongo.py INFO [line:59] apply_info 表关联的字段为 applyId : 5c9cab17b80aaa8164cba222
2019-03-28 20:06:15,255 del_mongo.py INFO [line:60] 正在查询关联表 apply 的数据
2019-03-28 20:06:15,423 del_mongo.py INFO [line:45] apply 表符合查询条件{'_id': ObjectId('5c9cab17b80aaa8164cba222')} 的数据有1 条
2019-03-28 20:06:16,148 del_mongo.py INFO [line:49] {'_id': ObjectId('5c9cab17b80aaa8164cba222'), 'isRoRefuse': '', 'accountType': ['securitiesMargin', 'futuresMargin', 'leveragedForeignExchangeAccountMargin'], 'applyInfoIds': [ObjectId('5c9cab18b80aaa46decba23d')], 'learnHow': ['newspaper', 'socialMedia'], 'tradingAuthorization': [''], 'isRelatedAccounts': ['opt'], 'step': '17', 'origin': '', 'idpUserId': 'cf61b0eb-0b1b-468d-9f41-191b4604cf5d', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '4662517E167EE681', 'appCertDn': 'CN=郑钦元,OU=441502199602120215,OU=1,O=0,L=汕尾市,ST=广东省,C=CN', 'accountNumber': '', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'refuse', 'customerSource': 'app', 'applySeqId': 1299, 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5c9cb167906980bcd23aa0b9'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5c9cb167906980e9213aa0b8'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5c9cb16790698073483aa0b7'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5c9cb16790698036ab3aa0b6'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5c9cb16790698070e73aa0b5'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5c9cb167906980b0943aa0b4'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5c9cb167906980f1333aa0b3'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5c9cb167906980abf03aa0b2'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5c9cb16790698032eb3aa0b1'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5c9cb167906980f05d3aa0b0'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5c9cb167906980cc563aa0af'), 'username': 'ro_one', 'usertype': 'fouexRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [{'_id': ObjectId('5c9cad20b80aaa69c1cba438'), 'name': 'ICBC11', 'number': '88888', 'holder': 'Zheng Qinyuan', 'currency': 'CNY'}, {'_id': ObjectId('5c9cad20b80aaac000cba437'), 'name': 'ABC', 'number': '2226666', 'holder': 'Zheng Qinyuan', 'currency': 'CNY'}, {'_id': ObjectId('5c9cad20b80aaa0ffdcba436'), 'name': 'ICBC', 'number': '333', 'holder': 'Zheng Qinyuan', 'currency': 'CNY'}], 'isHongKongBankCard': '', 'isMarginAccount': 'N', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': 'N', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': 'N', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5c9cb1679069803da33aa0bd'), 'taxId': '441502199602120215', 'residenceJurisdiction': 'China'}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'remark': '拒绝拒绝', 'reason': {'introductionAndPromotion': ['learnHow', 'learnHowCode'], 'other': ['szca']}, 'principal': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': 'tmp/OoU7JVlW1553772622933.pdf', 'appVersion': 'v1.5-20190328', 'deviceModel': '', 'refuseClients': 'N', 'refuseBy': {'name': 'cs1_t2', 'role': 'cs1'}, 'createdTime': 1553771288090.0, 'updatedTime': 1553772903252.0}
2019-03-28 20:06:16,148 del_mongo.py INFO [line:94] apply 表关联的字段为 idpUserId : cf61b0eb-0b1b-468d-9f41-191b4604cf5d
2019-03-28 20:06:16,148 del_mongo.py INFO [line:95] 正在查询关联表 users 的数据
2019-03-28 20:06:16,316 del_mongo.py INFO [line:45] users 表符合查询条件{'subject': 'cf61b0eb-0b1b-468d-9f41-191b4604cf5d'} 的数据有1 条
2019-03-28 20:06:16,652 del_mongo.py INFO [line:49] {'_id': ObjectId('5c9caaf51d454a086f55ca90'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15089514626', 'email': 'onedi@qq.com', 'phone_number': '8615089514626', 'custom': {'device_id': '4d606f1da1075c25'}, 'subject': 'cf61b0eb-0b1b-468d-9f41-191b4604cf5d', 'created_at': datetime.datetime(2019, 3, 28, 11, 7, 33, 56000), 'updated_at': datetime.datetime(2019, 3, 28, 11, 43, 29, 78000), 'secret': '$2a$08$Sys0pzixIgMKuq2rL3PJm.g6alxU5qTSN8lAq.amSdCX8hcgBpTdC', '__v': 0}
2019-03-28 20:06:16,652 del_mongo.py INFO [line:109] ***********************************

2019-03-28 20:06:16,652 del_mongo.py INFO [line:110] 没有关联数据,直接删除users 表
2019-03-28 20:06:16,822 del_mongo.py INFO [line:114] {'n': 1, 'opTime': {'ts': Timestamp(1553774776, 1), 't': 95}, 'electionId': ObjectId('7fffffff000000000000005f'), 'ok': 1.0, 'operationTime': Timestamp(1553774776, 1), '$clusterTime': {'clusterTime': Timestamp(1553774776, 1), 'signature': {'hash': b'\xb9A\xd3j\x1d\xcf\x00\x18\xdd\xdes$d\xf69m(\xc1\xa8\xfc', 'keyId': 6636138069080670209}}}
2019-03-28 20:06:16,823 del_mongo.py INFO [line:117] ***********************************

2019-03-28 20:06:16,823 del_mongo.py INFO [line:109] ***********************************

2019-03-28 20:06:16,823 del_mongo.py INFO [line:110] 没有关联数据,直接删除apply 表
2019-03-28 20:06:16,991 del_mongo.py INFO [line:114] {'n': 0, 'opTime': {'ts': Timestamp(1553774776, 1), 't': 95}, 'electionId': ObjectId('7fffffff000000000000005f'), 'ok': 1.0, 'operationTime': Timestamp(1553774776, 1), '$clusterTime': {'clusterTime': Timestamp(1553774776, 1), 'signature': {'hash': b'\xb9A\xd3j\x1d\xcf\x00\x18\xdd\xdes$d\xf69m(\xc1\xa8\xfc', 'keyId': 6636138069080670209}}}
2019-03-28 20:06:16,991 del_mongo.py INFO [line:117] ***********************************

2019-03-28 20:06:16,991 del_mongo.py INFO [line:109] ***********************************

2019-03-28 20:06:16,991 del_mongo.py INFO [line:110] 没有关联数据,直接删除apply_info 表
2019-03-28 20:06:17,161 del_mongo.py INFO [line:114] {'n': 0, 'opTime': {'ts': Timestamp(1553774776, 1), 't': 95}, 'electionId': ObjectId('7fffffff000000000000005f'), 'ok': 1.0, 'operationTime': Timestamp(1553774776, 1), '$clusterTime': {'clusterTime': Timestamp(1553774776, 1), 'signature': {'hash': b'\xb9A\xd3j\x1d\xcf\x00\x18\xdd\xdes$d\xf69m(\xc1\xa8\xfc', 'keyId': 6636138069080670209}}}
2019-03-28 20:06:17,161 del_mongo.py INFO [line:117] ***********************************

2019-03-28 20:06:17,161 del_mongo.py INFO [line:33] close Client
