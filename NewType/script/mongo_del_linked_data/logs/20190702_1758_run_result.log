2019-07-02 17:58:00,788 del_mongo.py INFO [line:31] 连接数据库uat
2019-07-02 17:58:05,774 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'phone': '13480994387'} 的数据有1 条
2019-07-02 17:58:05,897 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1ac2d8dc416321e4feea00'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d1ac2d8dc416381f1fee9d3'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Kongjietest', 'lastName': 'E', 'chineseName': '鄂孔杰', 'pastEnglishName': '', 'email': 'carl.e@newtype.com', 'phoneAreaCode': 'CHN', 'phone': '13480994387', 'address': '北京市东城区test', 'syncIDAddress': 'N', 'isHongKongBankCard': 'N', 'addressRegionProvince': '北京市', 'addressRegionCity': '', 'addressRegionArea': '东城区', 'addressDetailed': 'test', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '500101198612296436', 'countryIssue': 'CHN', 'birthday': 536169600000.0, 'birthPlace': 'CHN', 'idCardAddress': '重庆市万州区宁波路201号1幢7-4', 'idCardAddressReadOnly': '重庆市万州区宁波路201号1幢7-4', 'employment': 'employed', 'occupation': 'test', 'employedPeriod': '1To5Years', 'employer': 'test', 'businessType': 'test', 'businessAddress': '广东省广州市越秀区test', 'businessAddressRegionProvince': '广东省', 'businessAddressRegionCity': '广州市', 'businessAddressRegionArea': '越秀区', 'businessAddressDetailed': 'test', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['9ed33031-d656-42a1-bb91-9a2bda8a6e47.jpg', '9c3f6a44-a98d-47dd-b34d-fc6d807434c9.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': ['2f6f3519-3d85-416e-92b8-1d6db6fad702.jpg'], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'gt1000000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'gt8000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'N', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['hedging', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['ad65fb38-4a66-494d-a6b0-ec9224741d73.jpg'], 'passportMaterialBackup': ['bea01af9-4af6-43c9-b76f-8fd09c335764.jpg', 'f2a24881-5e06-4d52-b3aa-7e96fc2eee7b.jpg'], 'signatureMaterial': ['60ebcc12-c21c-40ff-805c-2e422ed13a26.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['9ed33031-d656-42a1-bb91-9a2bda8a6e47.jpg', '9c3f6a44-a98d-47dd-b34d-fc6d807434c9.jpg'], 'addressVerificationMaterialsBak': ['2f6f3519-3d85-416e-92b8-1d6db6fad702.jpg'], 'identityAuthenticationImgBak': ['ad65fb38-4a66-494d-a6b0-ec9224741d73.jpg'], 'signatureMaterialBak': ['60ebcc12-c21c-40ff-805c-2e422ed13a26.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '重庆市', 'idNo': '500101198612296436', 'userName': '鄂孔杰', 'sex': '男', 'contactAddr': '重庆市万州区宁波路201号1幢7-4', 'birthday': '1986/12/29', 'nationality': '汉', 'cardedPlace': '重庆市公安局万州分局', 'cardedExpiryDate': '20160621-20360621'}, 'createdTime': 1562034904643.0, 'updatedTime': 1562034904643.0}
2019-07-02 17:58:05,905 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5d1ac2d8dc416381f1fee9d3
2019-07-02 17:58:05,905 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-07-02 17:58:05,960 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5d1ac2d8dc416381f1fee9d3')} 的数据有1 条
2019-07-02 17:58:06,073 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1ac2d8dc416381f1fee9d3'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'futuresMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5d1ac2d8dc416321e4feea00')], 'learnHow': ['newspaper', 'magazine'], 'tradingAuthorization': [''], 'tradingAuthorizationBak': [''], 'isRelatedAccounts': ['opt'], 'caApplyErr': ['pushPdf:-26:未找到对应的用户信息,请确认参数:2019-07-02 17:29:40', 'signPdf:-10000003:Parameters are empty:2019-07-02 17:29:41'], 'reviewTime': ['{"cs1":"1562058991397,779681"}', '{"cs1":"1562059732017,632141"}'], 'step': 'success', 'origin': '', 'idpUserId': '08ed3db3-293d-48a7-8e57-a1bfddbc817f', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '农业银行test', 'appBankAccount': '6228480478396439679', 'appCertSn': '575A648EDF8787ED', 'appCertDn': 'CN=鄂孔杰,OU=500101198612296436,OU=1,O=0,L=深圳,ST=广东,C=CN', 'accountNumber': '', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'reviewing', 'customerSource': 'app', 'applySeqId': '9012', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5d1b2405fd614770845522d9'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd6147bb755522d8'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd614773995522d7'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd6147466a5522d6'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd6147301e5522d5'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd614738f45522d4'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd61471ca95522d3'), 'username': 'cliff_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd61475e055522d2'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd61476d6f5522d1'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd61471c0b5522d0'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd61472b955522cf'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd6147495b5522ce'), 'username': 'aaron_chan', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5d1b2405fd6147540d5522cd'), 'username': 'onedi.admin', 'usertype': 'securitiesRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': 'ygfh', 'learnHowOther': '', 'isBeneficiary': 'N', 'beneficiaryName': 'test', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5d1b2405fd6147e1ad5522da'), 'taxId': '500101198612296436', 'residenceJurisdiction': 'China'}], 'referralCode': '2578', 'signatureCoords': [{'_id': ObjectId('5d1b2405fd6147658c5522dd'), 'pageNo': 11, 'x': 140, 'y': 274}, {'_id': ObjectId('5d1b2405fd6147e1205522dc'), 'pageNo': 13, 'x': 130, 'y': 118}, {'_id': ObjectId('5d1b2405fd614739615522db'), 'pageNo': 15, 'x': 130, 'y': 145}], 'signatureSize': {'xDpi': '660', 'yDpi': '660'}, 'submitTime': 1562059781753.0, 'createdTime': 1562034904463.0, 'updatedTime': 1562059781753.0, 'remark': 'testtttttt', 'reason': {'other': ['szca']}, 'principal': '', 'appBankPhone': '15823114387', 'appFileId': '', 'openlocation': '', 'isReSubmit': 'Y', 'signatureFile': '', 'appVersion': 'v1.6.0', 'deviceModel': 'iPhone 6s/iOS:10.0', 'isContactClient': 'N', 'reSubmitTime': None, 'accountOpeningTime': None, 'LearnHowCodeOps': '', 'isHideGeneratePdfPage': 'N', 'isCommonService': 'Y', 'refuseBy': {'name': 'cs1_t2', 'role': 'cs1'}}
2019-07-02 17:58:06,073 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5d1ac2d8dc416321e4feea00')]
2019-07-02 17:58:06,073 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-07-02 17:58:06,129 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5d1ac2d8dc416321e4feea00')} 的数据有1 条
2019-07-02 17:58:06,236 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1ac2d8dc416321e4feea00'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5d1ac2d8dc416381f1fee9d3'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Kongjietest', 'lastName': 'E', 'chineseName': '鄂孔杰', 'pastEnglishName': '', 'email': 'carl.e@newtype.com', 'phoneAreaCode': 'CHN', 'phone': '13480994387', 'address': '北京市东城区test', 'syncIDAddress': 'N', 'isHongKongBankCard': 'N', 'addressRegionProvince': '北京市', 'addressRegionCity': '', 'addressRegionArea': '东城区', 'addressDetailed': 'test', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '500101198612296436', 'countryIssue': 'CHN', 'birthday': 536169600000.0, 'birthPlace': 'CHN', 'idCardAddress': '重庆市万州区宁波路201号1幢7-4', 'idCardAddressReadOnly': '重庆市万州区宁波路201号1幢7-4', 'employment': 'employed', 'occupation': 'test', 'employedPeriod': '1To5Years', 'employer': 'test', 'businessType': 'test', 'businessAddress': '广东省广州市越秀区test', 'businessAddressRegionProvince': '广东省', 'businessAddressRegionCity': '广州市', 'businessAddressRegionArea': '越秀区', 'businessAddressDetailed': 'test', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['9ed33031-d656-42a1-bb91-9a2bda8a6e47.jpg', '9c3f6a44-a98d-47dd-b34d-fc6d807434c9.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': ['2f6f3519-3d85-416e-92b8-1d6db6fad702.jpg'], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'gt1000000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'gt8000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': '', 'foreignExchange': '', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'N', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['hedging', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['ad65fb38-4a66-494d-a6b0-ec9224741d73.jpg'], 'passportMaterialBackup': ['bea01af9-4af6-43c9-b76f-8fd09c335764.jpg', 'f2a24881-5e06-4d52-b3aa-7e96fc2eee7b.jpg'], 'signatureMaterial': ['60ebcc12-c21c-40ff-805c-2e422ed13a26.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['9ed33031-d656-42a1-bb91-9a2bda8a6e47.jpg', '9c3f6a44-a98d-47dd-b34d-fc6d807434c9.jpg'], 'addressVerificationMaterialsBak': ['2f6f3519-3d85-416e-92b8-1d6db6fad702.jpg'], 'identityAuthenticationImgBak': ['ad65fb38-4a66-494d-a6b0-ec9224741d73.jpg'], 'signatureMaterialBak': ['60ebcc12-c21c-40ff-805c-2e422ed13a26.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '重庆市', 'idNo': '500101198612296436', 'userName': '鄂孔杰', 'sex': '男', 'contactAddr': '重庆市万州区宁波路201号1幢7-4', 'birthday': '1986/12/29', 'nationality': '汉', 'cardedPlace': '重庆市公安局万州分局', 'cardedExpiryDate': '20160621-20360621'}, 'createdTime': 1562034904643.0, 'updatedTime': 1562034904643.0}
2019-07-02 17:58:06,237 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : 08ed3db3-293d-48a7-8e57-a1bfddbc817f
2019-07-02 17:58:06,237 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-07-02 17:58:06,290 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': '08ed3db3-293d-48a7-8e57-a1bfddbc817f'} 的数据有1 条
2019-07-02 17:58:06,396 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1ac2c1f0be441ca77b8e87'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '13480994387', 'email': 'carl.e@newtype.com', 'phone_number': '8613480994387', 'custom': {'device_id': '36e6b188893a1d0a'}, 'subject': '08ed3db3-293d-48a7-8e57-a1bfddbc817f', 'created_at': datetime.datetime(2019, 7, 2, 2, 34, 40, 587000), 'updated_at': datetime.datetime(2019, 7, 2, 9, 29, 41, 841000), 'secret': '$2a$08$RHYiHU2Obg11ivBK6HXAhePWVaEBPN7rMhF.IdNn8Sgtc3GjPw.vy', '__v': 0}
2019-07-02 17:58:06,396 del_mongo.py INFO [line:136] users 表关联的字段为 subject : 08ed3db3-293d-48a7-8e57-a1bfddbc817f
2019-07-02 17:58:06,396 del_mongo.py INFO [line:137] 正在查询关联表 userdevices 的数据
2019-07-02 17:58:06,449 del_mongo.py INFO [line:66] userdevices 表符合查询条件{'subject': '08ed3db3-293d-48a7-8e57-a1bfddbc817f'} 的数据有3 条
2019-07-02 17:58:06,558 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1ac2c7f2a3c20ad239f73a'), 'device_id': '36e6b188893a1d0a', 'subject': '08ed3db3-293d-48a7-8e57-a1bfddbc817f', '__v': 0, 'code': 'a0c934a8-5bb0-4f48-94ee-ebd0fc1e5901', 'created_at': datetime.datetime(2019, 7, 2, 2, 34, 47, 156000), 'verified': True}
2019-07-02 17:58:06,558 del_mongo.py INFO [line:152] ***********************************

2019-07-02 17:58:06,559 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-02 17:58:06,614 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000221385A06C8>
2019-07-02 17:58:06,614 del_mongo.py INFO [line:171] ***********************************

2019-07-02 17:58:06,614 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1acd20f2a3c20ad23bd837'), 'device_id': '4d606f1da1075c25', 'subject': '08ed3db3-293d-48a7-8e57-a1bfddbc817f', '__v': 0, 'code': '28986694-442e-4a09-9594-b18ca9881855', 'created_at': datetime.datetime(2019, 7, 2, 3, 18, 56, 576000), 'verified': True}
2019-07-02 17:58:06,614 del_mongo.py INFO [line:152] ***********************************

2019-07-02 17:58:06,614 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-02 17:58:06,668 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000221385B5D88>
2019-07-02 17:58:06,668 del_mongo.py INFO [line:171] ***********************************

2019-07-02 17:58:06,668 del_mongo.py INFO [line:69] {'_id': ObjectId('5d1b1d93f2a3c20ad24994cc'), 'device_id': 'BD444C21-C434-4AAA-A24B-B747B630B503', 'subject': '08ed3db3-293d-48a7-8e57-a1bfddbc817f', '__v': 0, 'code': '26c86361-72e6-4ae7-adf0-be2d4b8c2609', 'created_at': datetime.datetime(2019, 7, 2, 9, 2, 11, 902000), 'verified': True}
2019-07-02 17:58:06,668 del_mongo.py INFO [line:152] ***********************************

2019-07-02 17:58:06,668 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-07-02 17:58:06,722 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000221385A06C8>
2019-07-02 17:58:06,722 del_mongo.py INFO [line:171] ***********************************

2019-07-02 17:58:06,722 del_mongo.py INFO [line:152] ***********************************

2019-07-02 17:58:06,722 del_mongo.py INFO [line:153] 没有关联数据,直接删除users 表
2019-07-02 17:58:06,775 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000221385B1B88>
2019-07-02 17:58:06,775 del_mongo.py INFO [line:171] ***********************************

2019-07-02 17:58:06,776 del_mongo.py INFO [line:152] ***********************************

2019-07-02 17:58:06,776 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-07-02 17:58:06,830 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000221385A06C8>
2019-07-02 17:58:06,830 del_mongo.py INFO [line:171] ***********************************

2019-07-02 17:58:06,831 del_mongo.py INFO [line:152] ***********************************

2019-07-02 17:58:06,831 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-07-02 17:58:06,891 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x00000221385B1F88>
2019-07-02 17:58:06,891 del_mongo.py INFO [line:171] ***********************************

2019-07-02 17:58:06,891 del_mongo.py INFO [line:37] close Client
2019-07-02 17:58:06,946 del_mongo.py INFO [line:44] users 表预计删除 1 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:44] userdevices 表预计删除 3 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:51] users 表实际删除 1 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:51] apply 表实际删除 1 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:51] userdevices 表实际删除 3 条记录
2019-07-02 17:58:06,946 del_mongo.py INFO [line:51] apply_info 表实际删除 1 条记录
