2019-04-25 16:13:49,567 del_mongo.py INFO [line:28] 连接数据库uat
2019-04-25 16:13:52,719 del_mongo.py INFO [line:44] apply_info 表符合查询条件{'phone': '15815873756'} 的数据有1 条
2019-04-25 16:13:52,831 del_mongo.py INFO [line:48] {'_id': ObjectId('5cc1614043a3cd4a7f712299'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cc1613f43a3cd714771227e'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Huajun', 'lastName': 'Deng', 'chineseName': '邓华俊', 'pastEnglishName': '', 'email': '794942392@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15815873756', 'address': '湖南省祁阳县大忠桥镇镰头湾村4组', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '431121199601081731', 'countryIssue': 'CHN', 'birthday': 821059200000.0, 'birthPlace': 'CHN', 'idCardAddress': '湖南省祁阳县大忠桥镇镰头湾村4组', 'idCardAddressReadOnly': '湖南省祁阳县大忠桥镇镰头湾村4组', 'employment': 'employed', 'occupation': '职位', 'employedPeriod': '1To5Years', 'employer': '公司名称', 'businessType': '业务性质', 'businessAddress': '广东省深圳市南山区广东省深圳市南山区科技园', 'businessAddressRegionProvince': '广东省', 'businessAddressRegionCity': '深圳市', 'businessAddressRegionArea': '南山区', 'businessAddressDetailed': '广东省深圳市南山区科技园', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '05c636f8-106a-4000-8f0c-990e8bd326ba.mp4', 'passportMaterial': ['8f76fedd-67f1-4226-92a4-213745f0ff93.jpg', 'cbcc8b9e-269b-4f27-9dbb-aa8fb764bfdd.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt999999', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt3000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '1To5Years', 'isAlgoTrade': 'N', 'isAlgoTradeAggree': 'N', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'N', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'asset', 'riskTolerance': 'high', 'disclaimerVideoBak': ['', '5277f303-eefc-4759-a725-99cdfb60f149.mp4', '05c636f8-106a-4000-8f0c-990e8bd326ba.mp4'], 'passportMaterialBak': ['8f76fedd-67f1-4226-92a4-213745f0ff93.jpg', 'cbcc8b9e-269b-4f27-9dbb-aa8fb764bfdd.jpg'], 'isReferralCode': 'N'}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'createdTime': 1556177216456.0, 'updatedTime': 1556177216456.0}
2019-04-25 16:13:52,840 del_mongo.py INFO [line:58] apply_info 表关联的字段为 applyId : 5cc1613f43a3cd714771227e
2019-04-25 16:13:52,840 del_mongo.py INFO [line:59] 正在查询关联表 apply 的数据
2019-04-25 16:13:52,891 del_mongo.py INFO [line:44] apply 表符合查询条件{'_id': ObjectId('5cc1613f43a3cd714771227e')} 的数据有1 条
2019-04-25 16:13:52,992 del_mongo.py INFO [line:48] {'_id': ObjectId('5cc1613f43a3cd714771227e'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin'], 'applyInfoIds': [ObjectId('5cc1614043a3cd4a7f712299')], 'learnHow': ['socialMedia'], 'tradingAuthorization': [''], 'isRelatedAccounts': ['opt'], 'step': '17', 'origin': '', 'idpUserId': '3a896551-7ad9-43fe-8fd7-14d97620a8db', 'applicationFor': 'individual', 'parentId': '', 'IBparentId': '', 'mailLanguage': '', 'accountOpeningWay': 'electronicAuth', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'notComplete', 'customerSource': 'app', 'applySeqId': 8303, 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5cc16a0764efa52e7cf89c65'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa59280f89c64'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa53bd0f89c63'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa56cebf89c62'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa57878f89c61'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa55aaff89c60'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa51e5df89c5f'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa5a39df89c5e'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa5c9c3f89c5d'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa5b5e1f89c5c'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cc16a0764efa5da59f89c5b'), 'username': 'ro_one', 'usertype': 'fouexRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': 'CNY', 'bankAccount': [{'_id': ObjectId('5cc16a0764efa5c9b3f89c67'), 'name': '星展银行', 'number': '1357924680', 'holder': 'Deng Huajun', 'currency': 'CNY'}, {'_id': ObjectId('5cc16a0764efa5bd6ff89c66'), 'name': '晨兴银行', 'number': '2468013579', 'holder': 'Deng Huajun', 'currency': 'CNY'}], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': 'EDZQ', 'learnHowOther': '', 'isBeneficiary': 'N', 'beneficiaryName': '受益人', 'isOrders': 'N', 'ordersName': '下单人', 'relatedAccountsOpt': [{'_id': ObjectId('5cc16a0764efa5618ef89c68'), 'taxId': '431121199601081731', 'residenceJurisdiction': 'China'}], 'referralCode': '201001', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'submitTime': 1556177215956.0, 'remark': '', 'reason': '', 'principal': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': '', 'appVersion': 'v1.3.2-20190425-itTest', 'deviceModel': 'vivo X9s/Android:7.1.1', 'isContactClient': '', 'reSubmitTime': None, 'refuseBy': '', 'createdTime': 1556177216076.0, 'updatedTime': 1556179463756.0}
2019-04-25 16:13:52,992 del_mongo.py INFO [line:93] apply 表关联的字段为 idpUserId : 3a896551-7ad9-43fe-8fd7-14d97620a8db
2019-04-25 16:13:52,992 del_mongo.py INFO [line:94] 正在查询关联表 users 的数据
2019-04-25 16:13:53,043 del_mongo.py INFO [line:44] users 表符合查询条件{'subject': '3a896551-7ad9-43fe-8fd7-14d97620a8db'} 的数据有1 条
2019-04-25 16:13:53,147 del_mongo.py INFO [line:48] {'_id': ObjectId('5cc16130ea2c2e3f4c98ce8e'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15815873756', 'email': '15815873756@toBeCreated.com', 'phone_number': '8615815873756', 'custom': {'device_id': 'ce9851ed8615e240'}, 'subject': '3a896551-7ad9-43fe-8fd7-14d97620a8db', 'created_at': datetime.datetime(2019, 4, 25, 7, 26, 40, 633000), 'updated_at': datetime.datetime(2019, 4, 25, 7, 26, 40, 633000), 'secret': '$2a$08$Vx6I/2qYikV7xuYumPNNouzx10cT2F7Tmf.qYPoQawTu5uJ7xMKaq', '__v': 0}
2019-04-25 16:13:53,147 del_mongo.py INFO [line:110] users 表关联的字段为 subject : 3a896551-7ad9-43fe-8fd7-14d97620a8db
2019-04-25 16:13:53,147 del_mongo.py INFO [line:111] 正在查询关联表 userdevices 的数据
2019-04-25 16:13:53,199 del_mongo.py INFO [line:44] userdevices 表符合查询条件{'subject': '3a896551-7ad9-43fe-8fd7-14d97620a8db'} 的数据有3 条
2019-04-25 16:13:53,302 del_mongo.py INFO [line:48] {'_id': ObjectId('5cc161336d85320cb1dc4bd4'), 'device_id': 'ce9851ed8615e240', 'subject': '3a896551-7ad9-43fe-8fd7-14d97620a8db', '__v': 0, 'code': '698fbcbc-b6eb-4124-acc2-f060e435b608', 'created_at': datetime.datetime(2019, 4, 25, 7, 26, 43, 631000), 'verified': True}
2019-04-25 16:13:53,302 del_mongo.py INFO [line:129] ***********************************

2019-04-25 16:13:53,302 del_mongo.py INFO [line:130] 没有关联数据,直接删除userdevices 表
2019-04-25 16:13:53,353 del_mongo.py INFO [line:139] {'n': 3, 'opTime': {'ts': Timestamp(1556180033, 3), 't': 101}, 'electionId': ObjectId('7fffffff0000000000000065'), 'ok': 1.0, 'operationTime': Timestamp(1556180033, 3), '$clusterTime': {'clusterTime': Timestamp(1556180033, 3), 'signature': {'hash': b'\x01s\x81\x87\xbb\xbd\xea\x92\x06\x9a\x13\xff\xde\x87m\xcc|cfA', 'keyId': 6636138069080670209}}}
2019-04-25 16:13:53,353 del_mongo.py INFO [line:143] ***********************************

2019-04-25 16:13:53,353 del_mongo.py INFO [line:48] {'_id': ObjectId('5cc1636e6d85320cb1dc7b02'), 'device_id': '157181f931412cc2', 'subject': '3a896551-7ad9-43fe-8fd7-14d97620a8db', '__v': 0, 'code': '1c6c82dd-263e-4609-bf0d-ab7565983269', 'created_at': datetime.datetime(2019, 4, 25, 7, 36, 14, 915000), 'verified': True}
2019-04-25 16:13:53,353 del_mongo.py INFO [line:129] ***********************************

2019-04-25 16:13:53,353 del_mongo.py INFO [line:130] 没有关联数据,直接删除userdevices 表
2019-04-25 16:13:53,404 del_mongo.py INFO [line:139] {'n': 0, 'opTime': {'ts': Timestamp(1556180033, 3), 't': 101}, 'electionId': ObjectId('7fffffff0000000000000065'), 'ok': 1.0, 'operationTime': Timestamp(1556180033, 3), '$clusterTime': {'clusterTime': Timestamp(1556180033, 3), 'signature': {'hash': b'\x01s\x81\x87\xbb\xbd\xea\x92\x06\x9a\x13\xff\xde\x87m\xcc|cfA', 'keyId': 6636138069080670209}}}
2019-04-25 16:13:53,405 del_mongo.py INFO [line:143] ***********************************

2019-04-25 16:13:53,405 del_mongo.py INFO [line:48] {'_id': ObjectId('5cc164b46d85320cb1dc959b'), 'device_id': '2054b8ec62726049', 'subject': '3a896551-7ad9-43fe-8fd7-14d97620a8db', '__v': 0, 'code': 'ccea27df-5e55-49a1-8cd1-79401b52b9e1', 'created_at': datetime.datetime(2019, 4, 25, 7, 41, 40, 126000), 'verified': True}
2019-04-25 16:13:53,405 del_mongo.py INFO [line:129] ***********************************

2019-04-25 16:13:53,405 del_mongo.py INFO [line:130] 没有关联数据,直接删除userdevices 表
2019-04-25 16:13:53,456 del_mongo.py INFO [line:139] {'n': 0, 'opTime': {'ts': Timestamp(1556180033, 3), 't': 101}, 'electionId': ObjectId('7fffffff0000000000000065'), 'ok': 1.0, 'operationTime': Timestamp(1556180033, 3), '$clusterTime': {'clusterTime': Timestamp(1556180033, 3), 'signature': {'hash': b'\x01s\x81\x87\xbb\xbd\xea\x92\x06\x9a\x13\xff\xde\x87m\xcc|cfA', 'keyId': 6636138069080670209}}}
2019-04-25 16:13:53,456 del_mongo.py INFO [line:143] ***********************************

2019-04-25 16:13:53,456 del_mongo.py INFO [line:129] ***********************************

2019-04-25 16:13:53,456 del_mongo.py INFO [line:130] 没有关联数据,直接删除users 表
2019-04-25 16:13:53,507 del_mongo.py INFO [line:139] {'n': 1, 'opTime': {'ts': Timestamp(1556180033, 4), 't': 101}, 'electionId': ObjectId('7fffffff0000000000000065'), 'ok': 1.0, 'operationTime': Timestamp(1556180033, 4), '$clusterTime': {'clusterTime': Timestamp(1556180033, 4), 'signature': {'hash': b'\x01s\x81\x87\xbb\xbd\xea\x92\x06\x9a\x13\xff\xde\x87m\xcc|cfA', 'keyId': 6636138069080670209}}}
2019-04-25 16:13:53,507 del_mongo.py INFO [line:143] ***********************************

2019-04-25 16:13:53,507 del_mongo.py INFO [line:129] ***********************************

2019-04-25 16:13:53,507 del_mongo.py INFO [line:130] 没有关联数据,直接删除apply 表
2019-04-25 16:13:53,559 del_mongo.py INFO [line:139] {'n': 1, 'opTime': {'ts': Timestamp(1556180033, 5), 't': 101}, 'electionId': ObjectId('7fffffff0000000000000065'), 'ok': 1.0, 'operationTime': Timestamp(1556180033, 5), '$clusterTime': {'clusterTime': Timestamp(1556180033, 5), 'signature': {'hash': b'\x01s\x81\x87\xbb\xbd\xea\x92\x06\x9a\x13\xff\xde\x87m\xcc|cfA', 'keyId': 6636138069080670209}}}
2019-04-25 16:13:53,560 del_mongo.py INFO [line:143] ***********************************

2019-04-25 16:13:53,561 del_mongo.py INFO [line:129] ***********************************

2019-04-25 16:13:53,561 del_mongo.py INFO [line:130] 没有关联数据,直接删除apply_info 表
2019-04-25 16:13:53,618 del_mongo.py INFO [line:139] {'n': 1, 'opTime': {'ts': Timestamp(1556180033, 6), 't': 101}, 'electionId': ObjectId('7fffffff0000000000000065'), 'ok': 1.0, 'operationTime': Timestamp(1556180033, 6), '$clusterTime': {'clusterTime': Timestamp(1556180033, 6), 'signature': {'hash': b'\x01s\x81\x87\xbb\xbd\xea\x92\x06\x9a\x13\xff\xde\x87m\xcc|cfA', 'keyId': 6636138069080670209}}}
2019-04-25 16:13:53,618 del_mongo.py INFO [line:143] ***********************************

2019-04-25 16:13:53,619 del_mongo.py INFO [line:34] close Client
