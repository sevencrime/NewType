2019-04-09 15:53:51,508 del_mongo.py INFO [line:27] 连接数据库uat
2019-04-09 15:53:52,830 del_mongo.py INFO [line:45] client_info 表符合查询条件{'email': 'onedi.zheng@newtype.io'} 的数据有1 条
2019-04-09 15:53:52,936 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac4f05017f22a2349c349a'), 'accountId': [ObjectId('5cac4f05017f221a989c3493')], 'applyId': [ObjectId('5cac4c4d304cf4c69d787f95')], 'clientSeqId': 2806, 'title': 'mrs', 'firstName': 'first', 'lastName': 'last', 'chineseName': 'Test', 'pastEnglishName': '', 'pastChineseName': '', 'email': 'onedi.zheng@newtype.io', 'phone': '5304362535799', 'address': '3466324364', 'addressMail': '34632646345', 'phoneAreaCode': 'HKG', 'nationality': 'CHN', 'idType': '2', 'idNumber': '4374235233328', 'countryIssue': 'CHN', 'birthday': 894384000000.0, 'birthPlace': 'CHN', 'employment': 'retired', 'employer': '', 'businessType': '', 'occupation': '', 'businessAddress': '', 'businessPhone': '', 'isMaster': '1', 'parentPath': '/100000/ceo_t1/ro_t1', 'riskInfo': {'passportMaterial': ['publicDropbox/BcPJde9SCkFdFssQaJz9KYRNMbfyYm2t.jpeg'], 'addressVerificationMaterials': ['publicDropbox/8pRBJ8ssFtibKGdF4kw1r6irkijMe9G2.jpeg'], 'bankCardMaterials': ['publicDropbox/NRccBw9hbN2ZXXbfajmrZw4TR17HNS3F.jpeg'], 'referralCode': '', 'isErr': False, 'errText': '', 'otherInformation': [], 'proofOfIncome': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'customerNetAssetValueHK': 'lt1000000', 'sourceOfWealth': ['savings'], 'sourceOfWealthOther': '', 'securities': 'lt1Year', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': 'lt1Year', 'options': 'lt1Year', 'otherInvestment': '', 'otherInvestmentText': '', 'foreignExchange': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isTradingStructureAggree': 'N', 'isApplyToOpenTradingStructure': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': '', 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'hedging', 'riskTolerance': 'low'}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'employedPeriod': '', 'employmentOther': '', 'createdTime': 1554796294082.0, 'updatedTime': 1554796294082.0}
2019-04-09 15:53:52,937 del_mongo.py INFO [line:79] client_info 表关联的字段为 accountId : [ObjectId('5cac4f05017f221a989c3493')]
2019-04-09 15:53:52,937 del_mongo.py INFO [line:80] 正在查询关联表 account 的数据
2019-04-09 15:53:52,989 del_mongo.py INFO [line:45] account 表符合查询条件{'_id': ObjectId('5cac4f05017f221a989c3493')} 的数据有1 条
2019-04-09 15:53:53,093 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac4f05017f221a989c3493'), 'accountType': ['bullionMargin', 'leveragedForeignExchangeAccountMargin', 'securitiesCash', 'futuresMargin'], 'clientId': [ObjectId('5cac4f05017f22a2349c349a')], 'accountNumber': '201001', 'applicationFor': 'individual', 'accountOpeningWay': 'visitingAccount', 'tradeAccountList': [{'_id': ObjectId('5cac4f05017f2249f79c3497'), 'type': 'FOREX', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554796293363.0, 'enabled': True, 'tradeAccount': '201004', 'tradeAccountType': 'mt5', 'accountType': 'leveragedForeignExchangeAccountMargin'}, {'_id': ObjectId('5cac4f05017f2227639c3496'), 'type': 'PM', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554796293363.0, 'enabled': True, 'tradeAccount': '201005', 'tradeAccountType': '', 'accountType': 'bullionMargin'}], 'parentPath': '/100000/ceo_t1/ro_t1', 'referralCode': '', 'createBy': '', 'updateBy': '', 'remark': '', 'idpUserId': 'd9b63bf2-e062-42ca-918f-0e3e591f738b', 'createdTime': 1554796293562.0, 'updatedTime': 1554796293562.0}
2019-04-09 15:53:53,093 del_mongo.py INFO [line:110] ***********************************

2019-04-09 15:53:53,093 del_mongo.py INFO [line:111] 没有关联数据,直接删除account 表
2019-04-09 15:53:53,147 del_mongo.py INFO [line:115] {'n': 1, 'opTime': {'ts': Timestamp(1554796435, 1), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554796435, 1), '$clusterTime': {'clusterTime': Timestamp(1554796435, 1), 'signature': {'hash': b'\xfb\xcbZ\x9a\xc6\xe5=\x93\xd3b\x94\x88\xd9f\xcd\x08Y}\x99\xa4', 'keyId': 6636138069080670209}}}
2019-04-09 15:53:53,147 del_mongo.py INFO [line:118] ***********************************

2019-04-09 15:53:53,147 del_mongo.py INFO [line:79] client_info 表关联的字段为 applyId : [ObjectId('5cac4c4d304cf4c69d787f95')]
2019-04-09 15:53:53,147 del_mongo.py INFO [line:80] 正在查询关联表 apply 的数据
2019-04-09 15:53:53,199 del_mongo.py INFO [line:45] apply 表符合查询条件{'_id': ObjectId('5cac4c4d304cf4c69d787f95')} 的数据有1 条
2019-04-09 15:53:53,304 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac4c4d304cf4c69d787f95'), 'isRoRefuse': '', 'accountType': ['bullionMargin', 'leveragedForeignExchangeAccountMargin', 'securitiesCash', 'futuresMargin'], 'applyInfoIds': [ObjectId('5cac4c4e304cf42c09787fb4')], 'learnHow': ['advertising', 'socialMedia'], 'tradingAuthorization': [], 'isRelatedAccounts': ['HK'], 'step': '', 'origin': '', 'idpUserId': 'd9b63bf2-e062-42ca-918f-0e3e591f738b', 'applicationFor': 'individual', 'parentId': 'ro_t1', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'visitingAccount', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '201001', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'success', 'customerSource': 'ballFives', 'applySeqId': 1409, 'roApprovalList': [{'isApproval': True, '_id': ObjectId('5cac4cd0267c19161a5e81f6'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c1927ae5e81f5'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c1906715e81f4'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c191c525e81f3'), 'username': 'ro_one', 'usertype': 'futuressRo', 'isOperate': '1'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c19760e5e81f2'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c19d1d75e81f1'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c1967c35e81f0'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': True, '_id': ObjectId('5cac4cd0267c195c335e81ef'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cac4cd0267c195ce25e81ee'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cac4cd0267c19ebd55e81ed'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cac4cd0267c19a1c75e81ec'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cac4cd0267c19626f5e81eb'), 'username': 'ro_gold'}], 'leadId': '', 'isFromLead': False, 'parentPath': '/100000/ceo_t1/ro_t1', 'currency': 'CNY', 'bankAccount': [{'_id': ObjectId('5cac4cd0267c1947c95e81f7'), 'currency': 'CNY', 'name': '2332', 'number': '2332', 'holder': '2332'}], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': 'EDYL', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5cac4c4d304cf49724787fb2'), 'residenceJurisdiction': '', 'taxId': ''}], 'referralCode': '', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'remark': '', 'reason': '', 'principal': '', 'openlocation': '', 'isReSubmit': '', 'signatureFile': '', 'appVersion': '', 'deviceModel': '', 'refuseClients': '', 'refuseBy': '', 'createdTime': 1554795597531.0, 'updatedTime': 1554795597531.0}
2019-04-09 15:53:53,304 del_mongo.py INFO [line:79] apply 表关联的字段为 applyInfoIds : [ObjectId('5cac4c4e304cf42c09787fb4')]
2019-04-09 15:53:53,304 del_mongo.py INFO [line:80] 正在查询关联表 apply_info 的数据
2019-04-09 15:53:53,356 del_mongo.py INFO [line:45] apply_info 表符合查询条件{'_id': ObjectId('5cac4c4e304cf42c09787fb4')} 的数据有1 条
2019-04-09 15:53:53,461 del_mongo.py INFO [line:49] {'_id': ObjectId('5cac4c4e304cf42c09787fb4'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cac4c4d304cf4c69d787f95'), 'leadId': '', 'isFromLead': False, 'riskInfo': {'passportMaterial': ['publicDropbox/BcPJde9SCkFdFssQaJz9KYRNMbfyYm2t.jpeg'], 'addressVerificationMaterials': ['publicDropbox/8pRBJ8ssFtibKGdF4kw1r6irkijMe9G2.jpeg'], 'bankCardMaterials': ['publicDropbox/NRccBw9hbN2ZXXbfajmrZw4TR17HNS3F.jpeg'], 'referralCode': '', 'isErr': False, 'errText': '', 'otherInformation': [], 'proofOfIncome': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'customerNetAssetValueHK': 'lt1000000', 'sourceOfWealth': ['savings'], 'sourceOfWealthOther': '', 'securities': 'lt1Year', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': 'lt1Year', 'options': 'lt1Year', 'otherInvestment': '', 'otherInvestmentText': '', 'foreignExchange': 'lt1Year', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isTradingStructureAggree': 'N', 'isApplyToOpenTradingStructure': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': '', 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'hedging', 'riskTolerance': 'low'}, 'title': 'mrs', 'lastName': 'last', 'firstName': 'first', 'chineseName': 'Test', 'pastEnglishName': '', 'pastChineseName': '', 'idType': '2', 'idNumber': '4374235233328', 'countryIssue': 'CHN', 'nationality': 'CHN', 'birthPlace': 'CHN', 'birthday': 894384000000.0, 'email': 'onedi.zheng@newtype.io', 'phoneAreaCode': 'HKG', 'phone': '5304362535799', 'address': '3466324364', 'addressMail': '34632646345', 'employment': 'retired', 'employmentOther': '', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessPhone': '', 'idCardAddress': '', 'idTypeOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'idCardAddressReadOnly': '', 'syncIDAddress': '', 'isHongKongBankCard': '', 'createdTime': 1554795598070.0, 'updatedTime': 1554795598070.0}
2019-04-09 15:53:53,461 del_mongo.py INFO [line:110] ***********************************

2019-04-09 15:53:53,461 del_mongo.py INFO [line:111] 没有关联数据,直接删除apply_info 表
2019-04-09 15:53:53,512 del_mongo.py INFO [line:115] {'n': 1, 'opTime': {'ts': Timestamp(1554796435, 2), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554796435, 2), '$clusterTime': {'clusterTime': Timestamp(1554796435, 2), 'signature': {'hash': b'\xfb\xcbZ\x9a\xc6\xe5=\x93\xd3b\x94\x88\xd9f\xcd\x08Y}\x99\xa4', 'keyId': 6636138069080670209}}}
2019-04-09 15:53:53,512 del_mongo.py INFO [line:118] ***********************************

2019-04-09 15:53:53,512 del_mongo.py INFO [line:110] ***********************************

2019-04-09 15:53:53,512 del_mongo.py INFO [line:111] 没有关联数据,直接删除apply 表
2019-04-09 15:53:53,565 del_mongo.py INFO [line:115] {'n': 1, 'opTime': {'ts': Timestamp(1554796435, 3), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554796435, 3), '$clusterTime': {'clusterTime': Timestamp(1554796435, 3), 'signature': {'hash': b'\xfb\xcbZ\x9a\xc6\xe5=\x93\xd3b\x94\x88\xd9f\xcd\x08Y}\x99\xa4', 'keyId': 6636138069080670209}}}
2019-04-09 15:53:53,566 del_mongo.py INFO [line:118] ***********************************

2019-04-09 15:53:53,566 del_mongo.py INFO [line:110] ***********************************

2019-04-09 15:53:53,566 del_mongo.py INFO [line:111] 没有关联数据,直接删除client_info 表
2019-04-09 15:53:53,618 del_mongo.py INFO [line:115] {'n': 1, 'opTime': {'ts': Timestamp(1554796435, 4), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554796435, 4), '$clusterTime': {'clusterTime': Timestamp(1554796435, 4), 'signature': {'hash': b'\xfb\xcbZ\x9a\xc6\xe5=\x93\xd3b\x94\x88\xd9f\xcd\x08Y}\x99\xa4', 'keyId': 6636138069080670209}}}
2019-04-09 15:53:53,619 del_mongo.py INFO [line:118] ***********************************

2019-04-09 15:53:53,619 del_mongo.py INFO [line:33] close Client
