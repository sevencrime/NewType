2019-04-10 15:52:04,098 del_mongo.py INFO [line:27] 连接数据库uat
2019-04-10 15:52:05,785 del_mongo.py INFO [line:45] client_info 表符合查询条件{'phone': '15919987852'} 的数据有1 条
2019-04-10 15:52:05,893 del_mongo.py INFO [line:49] {'_id': ObjectId('5cad9e6e7eaa6c0d07556a8e'), 'accountId': [ObjectId('5cad9e6e7eaa6c16a0556a83')], 'applyId': [ObjectId('5cad9abe116dbf7852d0821e')], 'clientSeqId': 2823, 'title': 'miss', 'firstName': 'Lihua', 'lastName': 'Zhou', 'chineseName': '周丽华', 'pastEnglishName': '', 'pastChineseName': '', 'email': 'lily.zhou@newtype.io', 'phone': '15919987852', 'address': '江西省抚州市临川区荆公路160号', 'addressMail': '', 'phoneAreaCode': 'CHN', 'nationality': 'CHN', 'idType': '2', 'idNumber': '362501199009243083', 'countryIssue': 'CHN', 'birthday': 654134400000.0, 'birthPlace': 'CHN', 'employment': 'unemployed', 'employer': '', 'businessType': '', 'occupation': '', 'businessAddress': '', 'businessPhone': '', 'isMaster': '1', 'parentPath': '/100000/ceo_t1/ro_t1/kwokwah.wong', 'riskInfo': {'isApplyToOpenTradingStructure': 'N', 'isTradingStructureAggree': 'N', 'disclaimerVideo': 'db25abf5-fa11-4508-888b-6a2d15df6eac.mp4', 'passportMaterial': ['2846139d-31a1-41fb-9457-eaf1f3bab12b.jpg', '2bdbe22d-fe28-42b2-8b9a-4cc021b1576a.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': ['58123c9d-ed4c-4bd3-90d4-e8715eb2a169.pdf'], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'hedging', 'riskTolerance': 'medium'}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'employedPeriod': '', 'employmentOther': '', 'createdTime': 1554882158592.0, 'updatedTime': 1554882158592.0}
2019-04-10 15:52:05,896 del_mongo.py INFO [line:79] client_info 表关联的字段为 accountId : [ObjectId('5cad9e6e7eaa6c16a0556a83')]
2019-04-10 15:52:05,896 del_mongo.py INFO [line:80] 正在查询关联表 account 的数据
2019-04-10 15:52:05,948 del_mongo.py INFO [line:45] account 表符合查询条件{'_id': ObjectId('5cad9e6e7eaa6c16a0556a83')} 的数据有1 条
2019-04-10 15:52:06,063 del_mongo.py INFO [line:49] {'_id': ObjectId('5cad9e6e7eaa6c16a0556a83'), 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin', 'bullionMargin'], 'clientId': [ObjectId('5cad9e6e7eaa6c0d07556a8e')], 'accountNumber': '111556', 'applicationFor': 'individual', 'accountOpeningWay': 'electronicAuth', 'tradeAccountList': [{'_id': ObjectId('5cad9e6e7eaa6c6b43556a8b'), 'type': 'STOCK', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554882157989.0, 'enabled': True, 'tradeAccount': '23485456', 'tradeAccountType': '', 'accountType': 'securitiesCash'}, {'_id': ObjectId('5cad9e6e7eaa6cae5e556a8a'), 'type': 'FUTURES', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554882157989.0, 'enabled': True, 'tradeAccount': '52465456', 'tradeAccountType': '', 'accountType': 'futuresMargin'}, {'_id': ObjectId('5cad9e6e7eaa6c1794556a89'), 'type': 'FOREX', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554882157989.0, 'enabled': True, 'tradeAccount': '23165465', 'tradeAccountType': 'mt5', 'accountType': 'leveragedForeignExchangeAccountMargin'}, {'_id': ObjectId('5cad9e6e7eaa6cab33556a88'), 'type': 'PM', 'status': 'success', 'spotCheck': 'notCheck', 'createdTime': 1554882157989.0, 'enabled': True, 'tradeAccount': '111333666', 'tradeAccountType': '', 'accountType': 'bullionMargin'}], 'parentPath': '/100000/ceo_t1/ro_t1/kwokwah.wong', 'referralCode': '888888', 'createBy': '', 'updateBy': '', 'remark': '', 'idpUserId': 'eb011eef-7781-42c4-8dc8-1768aabd5106', 'createdTime': 1554882158091.0, 'updatedTime': 1554882158091.0}
2019-04-10 15:52:06,063 del_mongo.py INFO [line:95] account 表关联的字段为 idpUserId : eb011eef-7781-42c4-8dc8-1768aabd5106
2019-04-10 15:52:06,063 del_mongo.py INFO [line:96] 正在查询关联表 users 的数据
2019-04-10 15:52:06,113 del_mongo.py INFO [line:45] users 表符合查询条件{'subject': 'eb011eef-7781-42c4-8dc8-1768aabd5106'} 的数据有1 条
2019-04-10 15:52:06,226 del_mongo.py INFO [line:49] {'_id': ObjectId('5cad9aa509d4db09c572c195'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15919987852', 'email': 'lily.zhou@newtype.io', 'phone_number': '8615919987852', 'custom': {'device_id': 'b52c19290178bbbc', 'accountNumber': '111556', 'accountId': '5cad9e6e7eaa6c16a0556a83'}, 'subject': 'eb011eef-7781-42c4-8dc8-1768aabd5106', 'created_at': datetime.datetime(2019, 4, 10, 7, 26, 29, 649000), 'updated_at': datetime.datetime(2019, 4, 10, 7, 42, 39, 589000), 'secret': '$2a$08$v0Keq1zRJvXc9pG21WWWJ.U0XAD0TC43FlAmX7UxY98CZ8w.kF8vm', '__v': 0}
2019-04-10 15:52:06,227 del_mongo.py INFO [line:111] ***********************************

2019-04-10 15:52:06,227 del_mongo.py INFO [line:112] 没有关联数据,直接删除users 表
2019-04-10 15:52:06,278 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554882728, 1), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554882728, 1), '$clusterTime': {'clusterTime': Timestamp(1554882728, 1), 'signature': {'hash': b'g@\x0f\x85\xd9\x11\x8a\xfa\x0e\x97\xf3{\x1b\x99\xe1~\xdcT\xcb\x9d', 'keyId': 6636138069080670209}}}
2019-04-10 15:52:06,278 del_mongo.py INFO [line:119] ***********************************

2019-04-10 15:52:06,278 del_mongo.py INFO [line:111] ***********************************

2019-04-10 15:52:06,278 del_mongo.py INFO [line:112] 没有关联数据,直接删除account 表
2019-04-10 15:52:06,331 del_mongo.py INFO [line:116] {'n': 0, 'opTime': {'ts': Timestamp(1554882728, 1), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554882728, 1), '$clusterTime': {'clusterTime': Timestamp(1554882728, 1), 'signature': {'hash': b'g@\x0f\x85\xd9\x11\x8a\xfa\x0e\x97\xf3{\x1b\x99\xe1~\xdcT\xcb\x9d', 'keyId': 6636138069080670209}}}
2019-04-10 15:52:06,331 del_mongo.py INFO [line:119] ***********************************

2019-04-10 15:52:06,331 del_mongo.py INFO [line:79] client_info 表关联的字段为 applyId : [ObjectId('5cad9abe116dbf7852d0821e')]
2019-04-10 15:52:06,331 del_mongo.py INFO [line:80] 正在查询关联表 apply 的数据
2019-04-10 15:52:06,384 del_mongo.py INFO [line:45] apply 表符合查询条件{'_id': ObjectId('5cad9abe116dbf7852d0821e')} 的数据有1 条
2019-04-10 15:52:06,492 del_mongo.py INFO [line:49] {'_id': ObjectId('5cad9abe116dbf7852d0821e'), 'isRoRefuse': 'N', 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin', 'bullionMargin'], 'applyInfoIds': [ObjectId('5cad9abe116dbf6468d08239')], 'learnHow': ['socialMedia'], 'tradingAuthorization': [''], 'isRelatedAccounts': ['opt'], 'step': 'success', 'origin': '', 'idpUserId': 'eb011eef-7781-42c4-8dc8-1768aabd5106', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '', 'appBankAccount': '', 'appCertSn': '44E7EEEE96821975', 'appCertDn': 'CN=周丽华,OU=362501199009243083,OU=1,O=0,L=抚州地区,ST=江西省,C=CN', 'accountNumber': '111556', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'success', 'customerSource': 'app', 'applySeqId': 1430, 'roApprovalList': [{'isApproval': True, '_id': ObjectId('5cad9cbef4006626ee8d7865'), 'username': 'don_test', 'usertype': 'futuressRo', 'isOperate': '1'}, {'isApproval': True, '_id': ObjectId('5cad9cbef40066b8518d7864'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef40066724d8d7863'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef40066478e8d7862'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef4006637fb8d7861'), 'username': 'cliff_test', 'usertype': 'securitiesRo', 'isOperate': '1'}, {'isApproval': True, '_id': ObjectId('5cad9cbef40066c9b08d7860'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef40066c13a8d785f'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef4006663b08d785e'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef4006648778d785d'), 'username': 'aaron.chan', 'usertype': 'fouexRo', 'isOperate': '1'}, {'isApproval': True, '_id': ObjectId('5cad9cbef4006602858d785c'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef40066f00b8d785b'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': True, '_id': ObjectId('5cad9cbef4006668c48d785a'), 'username': 'ro_gold', 'usertype': 'bullionRo', 'isOperate': '1'}, {'isApproval': True, '_id': ObjectId('5cad9cbef4006612508d7859'), 'username': 'aaron_test', 'usertype': 'bullionRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': 'CNY', 'bankAccount': [{'_id': ObjectId('5cad9cbef4006694d38d7866'), 'name': 'sdd', 'number': '55554', 'holder': 'Zhou Lihua', 'currency': 'CNY'}], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '88888', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5cad9cbef40066be458d7867'), 'taxId': '362501199009243083', 'residenceJurisdiction': 'China'}], 'referralCode': '888888', 'signatureCoords': [{'_id': ObjectId('5c3ee2c33dc2063f0894a6dd'), 'pageNo': 13, 'x': 130, 'y': 602}, {'_id': ObjectId('5c3ee2c33dc20649d894a6dc'), 'pageNo': 14, 'x': 130, 'y': 83}, {'_id': ObjectId('5c3ee2c33dc20633a794a6db'), 'pageNo': 16, 'x': 130, 'y': 165}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'remark': '', 'reason': '', 'principal': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': 'tmp/ngUXzJB91554881641860.pdf', 'appVersion': 'v1.3.2-20190409-testBullion-uat', 'deviceModel': 'Redmi Note 4/Android:6.0', 'refuseClients': '', 'refuseBy': '', 'createdTime': 1554881214311.0, 'updatedTime': 1554882080890.0}
2019-04-10 15:52:06,493 del_mongo.py INFO [line:79] apply 表关联的字段为 applyInfoIds : [ObjectId('5cad9abe116dbf6468d08239')]
2019-04-10 15:52:06,493 del_mongo.py INFO [line:80] 正在查询关联表 apply_info 的数据
2019-04-10 15:52:06,797 del_mongo.py INFO [line:45] apply_info 表符合查询条件{'_id': ObjectId('5cad9abe116dbf6468d08239')} 的数据有1 条
2019-04-10 15:52:06,899 del_mongo.py INFO [line:49] {'_id': ObjectId('5cad9abe116dbf6468d08239'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cad9abe116dbf7852d0821e'), 'leadId': '', 'isFromLead': False, 'title': 'miss', 'firstName': 'Lihua', 'lastName': 'Zhou', 'chineseName': '周丽华', 'pastEnglishName': '', 'email': 'lily.zhou@newtype.io', 'phoneAreaCode': 'CHN', 'phone': '15919987852', 'address': '江西省抚州市临川区荆公路160号', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '362501199009243083', 'countryIssue': 'CHN', 'birthday': 654134400000.0, 'birthPlace': 'CHN', 'idCardAddress': '江西省抚州市临川区荆公路160号', 'idCardAddressReadOnly': '江西省抚州市临川区荆公路160号', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'N', 'isTradingStructureAggree': 'N', 'disclaimerVideo': 'db25abf5-fa11-4508-888b-6a2d15df6eac.mp4', 'passportMaterial': ['2846139d-31a1-41fb-9457-eaf1f3bab12b.jpg', '2bdbe22d-fe28-42b2-8b9a-4cc021b1576a.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': ['58123c9d-ed4c-4bd3-90d4-e8715eb2a169.pdf'], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt200000', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'lt1000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': 'lt1Year', 'futures': '1To5Years', 'options': 'lt1Year', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'N', 'isIndustryExperience': 'Y', 'isStocks': 'Y', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': 'hedging', 'riskTolerance': 'medium'}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'createdTime': 1554881214611.0, 'updatedTime': 1554881214611.0}
2019-04-10 15:52:06,899 del_mongo.py INFO [line:111] ***********************************

2019-04-10 15:52:06,899 del_mongo.py INFO [line:112] 没有关联数据,直接删除apply_info 表
2019-04-10 15:52:06,950 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554882728, 2), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554882728, 2), '$clusterTime': {'clusterTime': Timestamp(1554882728, 2), 'signature': {'hash': b'g@\x0f\x85\xd9\x11\x8a\xfa\x0e\x97\xf3{\x1b\x99\xe1~\xdcT\xcb\x9d', 'keyId': 6636138069080670209}}}
2019-04-10 15:52:06,951 del_mongo.py INFO [line:119] ***********************************

2019-04-10 15:52:06,951 del_mongo.py INFO [line:111] ***********************************

2019-04-10 15:52:06,951 del_mongo.py INFO [line:112] 没有关联数据,直接删除apply 表
2019-04-10 15:52:07,002 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554882728, 3), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554882728, 3), '$clusterTime': {'clusterTime': Timestamp(1554882728, 3), 'signature': {'hash': b'g@\x0f\x85\xd9\x11\x8a\xfa\x0e\x97\xf3{\x1b\x99\xe1~\xdcT\xcb\x9d', 'keyId': 6636138069080670209}}}
2019-04-10 15:52:07,002 del_mongo.py INFO [line:119] ***********************************

2019-04-10 15:52:07,002 del_mongo.py INFO [line:111] ***********************************

2019-04-10 15:52:07,002 del_mongo.py INFO [line:112] 没有关联数据,直接删除client_info 表
2019-04-10 15:52:07,053 del_mongo.py INFO [line:116] {'n': 1, 'opTime': {'ts': Timestamp(1554882728, 4), 't': 98}, 'electionId': ObjectId('7fffffff0000000000000062'), 'ok': 1.0, 'operationTime': Timestamp(1554882728, 4), '$clusterTime': {'clusterTime': Timestamp(1554882728, 4), 'signature': {'hash': b'g@\x0f\x85\xd9\x11\x8a\xfa\x0e\x97\xf3{\x1b\x99\xe1~\xdcT\xcb\x9d', 'keyId': 6636138069080670209}}}
2019-04-10 15:52:07,054 del_mongo.py INFO [line:119] ***********************************

2019-04-10 15:52:07,054 del_mongo.py INFO [line:33] close Client
2019-04-10 15:52:26,005 del_mongo.py INFO [line:27] 连接数据库uat
2019-04-10 15:52:27,420 del_mongo.py INFO [line:45] client_info 表符合查询条件{'phone': '15919987852'} 的数据有0 条
2019-04-10 15:52:27,576 del_mongo.py INFO [line:33] close Client
