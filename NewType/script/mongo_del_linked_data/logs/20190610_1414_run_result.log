2019-06-10 14:14:27,765 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-10 14:14:32,961 del_mongo.py INFO [line:66] client_info 表符合查询条件{'email': 'onedi@qq.com'} 的数据有0 条
2019-06-10 14:14:33,065 del_mongo.py INFO [line:37] close Client
2019-06-10 14:14:39,644 del_mongo.py INFO [line:31] 连接数据库uat
2019-06-10 14:14:44,465 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'email': 'onedi@qq.com'} 的数据有1 条
2019-06-10 14:14:44,578 del_mongo.py INFO [line:69] {'_id': ObjectId('5cfdc7a2ba22fa5b67f88d66'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cfdc7a2ba22fa739ff88d39'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Qinyuan', 'lastName': 'Zheng', 'chineseName': '郑钦元', 'pastEnglishName': '', 'email': 'onedi@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15089514626', 'address': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '441502199602120215', 'countryIssue': 'CHN', 'birthday': 824054400000.0, 'birthPlace': 'CHN', 'idCardAddress': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'idCardAddressReadOnly': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['c5a070ad-daee-4cab-b569-f402c8696c79.jpg', '890b492c-4565-4a98-b263-3ec7a63cdbc5.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt999999', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'gt8000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': '6To10Years', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['a4a5c6d1-579f-4a01-9e18-e485e6030206.jpg'], 'passportMaterialBackup': ['176fac6b-e3b1-4367-a707-6a61268797bb.jpg', '4e83a101-94c5-4a85-89c1-b696179d9125.jpg'], 'signatureMaterial': ['d04b465c-c8ab-4212-b1e6-faef952fc2b2.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['c5a070ad-daee-4cab-b569-f402c8696c79.jpg', '890b492c-4565-4a98-b263-3ec7a63cdbc5.jpg'], 'identityAuthenticationImgBak': ['703d42e2-bcdc-4905-8f21-e407c1641e16.jpg', 'a4a5c6d1-579f-4a01-9e18-e485e6030206.jpg'], 'signatureMaterialBak': ['d04b465c-c8ab-4212-b1e6-faef952fc2b2.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '广东省', 'city': '汕尾市', 'idNo': '441502199602120215', 'userName': '郑钦元', 'sex': '男', 'contactAddr': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'birthday': '1996/2/12', 'nationality': '汉', 'cardedPlace': '抚州市公安局临川分局', 'cardedExpiryDate': '20150911-20250911'}, 'createdTime': 1560135586843.0, 'updatedTime': 1560135586843.0}
2019-06-10 14:14:44,581 del_mongo.py INFO [line:84] apply_info 表关联的字段为 applyId : 5cfdc7a2ba22fa739ff88d39
2019-06-10 14:14:44,581 del_mongo.py INFO [line:85] 正在查询关联表 apply 的数据
2019-06-10 14:14:44,630 del_mongo.py INFO [line:66] apply 表符合查询条件{'_id': ObjectId('5cfdc7a2ba22fa739ff88d39')} 的数据有1 条
2019-06-10 14:14:44,730 del_mongo.py INFO [line:69] {'_id': ObjectId('5cfdc7a2ba22fa739ff88d39'), 'isRoRefuse': '', 'accountType': ['securitiesCash', 'futuresMargin', 'leveragedForeignExchangeAccountMargin'], 'appBankCardImg': [], 'applyInfoIds': [ObjectId('5cfdc7a2ba22fa5b67f88d66')], 'learnHow': ['lecture', 'socialMedia'], 'tradingAuthorization': [''], 'tradingAuthorizationBak': [''], 'isRelatedAccounts': ['opt'], 'caApplyErr': ['applyCert:-4:申请证书异常:2019June10 01:44:24', 'pushPdf:[object Object]:2019June10 01:47:01'], 'reviewTime': [], 'step': 'success', 'origin': '', 'idpUserId': '1b58e5f2-9944-463a-8452-ea4540da331b', 'applicationFor': 'individual', 'parentId': 'kwokwah.wong', 'IBparentId': '', 'mailLanguage': 'zh-hans', 'accountOpeningWay': 'electronicAuth', 'appBankName': '中国工商银行', 'appBankAccount': '6217007200074623383', 'appCertSn': '', 'appCertDn': '', 'accountNumber': '', 'personalInfoDeclartion': 'Y', 'agreeToTheTerms': 'Y', 'status': 'notComplete', 'customerSource': 'app', 'applySeqId': '8779', 'roApprovalList': [{'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf44c2ef429f'), 'username': 'don_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafd9bdef429e'), 'username': 'ro_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf78feef429d'), 'username': 'ro1_don', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf48f3ef429c'), 'username': 'ro_one', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafd846ef429b'), 'username': 'aaron_chan', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf6f95ef429a'), 'username': 'onedi.admin', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf1f78ef4299'), 'username': 'cliff_test', 'usertype': 'futuressRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafe72fef4298'), 'username': 'cliff_test', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafc77cef4297'), 'username': 'ro_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf6161ef4296'), 'username': 'ro1_cliff', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafceb9ef4295'), 'username': 'ro_one', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafc296ef4294'), 'username': 'aaron_chan', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf83e9ef4293'), 'username': 'onedi.admin', 'usertype': 'securitiesRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafb953ef4292'), 'username': 'aaron.chan', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf8991ef4291'), 'username': 'aaron_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebafc7f6ef4290'), 'username': 'ro_one', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf2e87ef428f'), 'username': 'onedi.admin', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf4e64ef428e'), 'username': 'cliff_test', 'usertype': 'fouexRo'}, {'isApproval': False, '_id': ObjectId('5cfdeedaeaebaf3746ef428d'), 'username': 'aaron_chan', 'usertype': 'fouexRo'}], 'leadId': '', 'isFromLead': False, 'parentPath': '', 'currency': '', 'bankAccount': [], 'isHongKongBankCard': '', 'isMarginAccount': '', 'marginAccountName': '', 'marginAccountNumber': '', 'isDiscretion': '', 'discretionName': '', 'discretionNumber': '', 'isCompanyAccounts': '', 'companyAccountsName': '', 'companyAccountsNumber': '', 'learnHowCode': '64697', 'learnHowOther': '', 'isBeneficiary': 'Y', 'beneficiaryName': '', 'isOrders': 'Y', 'ordersName': '', 'relatedAccountsOpt': [{'_id': ObjectId('5cfdeedaeaebaf0ecbef42a0'), 'taxId': '441502199602120215', 'residenceJurisdiction': 'China'}], 'referralCode': '54649785', 'signatureCoords': [{'_id': ObjectId('5cfdeedaeaebaf2d07ef42a3'), 'pageNo': 11, 'x': 140, 'y': 274}, {'_id': ObjectId('5cfdeedaeaebaf3622ef42a2'), 'pageNo': 13, 'x': 130, 'y': 118}, {'_id': ObjectId('5cfdeedaeaebaf2ae2ef42a1'), 'pageNo': 15, 'x': 130, 'y': 145}], 'signatureSize': {'xDpi': '630', 'yDpi': '630'}, 'submitTime': None, 'createdTime': 1560135586665.0, 'updatedTime': 1560145623583.0, 'remark': '', 'reason': '', 'principal': '', 'appBankPhone': '15089514626', 'appFileId': '', 'openlocation': '', 'isReSubmit': 'N', 'signatureFile': '', 'appVersion': 'v1.4.0', 'deviceModel': 'ONEPLUS A3003/Android:8.0.0', 'isContactClient': '', 'reSubmitTime': None, 'LearnHowCodeOps': '', 'isHideGeneratePdfPage': 'N', 'isCommonService': 'Y', 'refuseBy': ''}
2019-06-10 14:14:44,730 del_mongo.py INFO [line:103] apply 表关联的字段为 applyInfoIds : [ObjectId('5cfdc7a2ba22fa5b67f88d66')]
2019-06-10 14:14:44,730 del_mongo.py INFO [line:104] 正在查询关联表 apply_info 的数据
2019-06-10 14:14:44,779 del_mongo.py INFO [line:66] apply_info 表符合查询条件{'_id': ObjectId('5cfdc7a2ba22fa5b67f88d66')} 的数据有1 条
2019-06-10 14:14:44,881 del_mongo.py INFO [line:69] {'_id': ObjectId('5cfdc7a2ba22fa5b67f88d66'), 'relationWithMaster': '', 'isMaster': '1', 'applyId': ObjectId('5cfdc7a2ba22fa739ff88d39'), 'leadId': '', 'isFromLead': False, 'title': 'mr', 'firstName': 'Qinyuan', 'lastName': 'Zheng', 'chineseName': '郑钦元', 'pastEnglishName': '', 'email': 'onedi@qq.com', 'phoneAreaCode': 'CHN', 'phone': '15089514626', 'address': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'syncIDAddress': 'Y', 'isHongKongBankCard': 'N', 'addressRegionProvince': '', 'addressRegionCity': '', 'addressRegionArea': '', 'addressDetailed': '', 'addressMail': '', 'nationality': 'CHN', 'idType': '2', 'idNumber': '441502199602120215', 'countryIssue': 'CHN', 'birthday': 824054400000.0, 'birthPlace': 'CHN', 'idCardAddress': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'idCardAddressReadOnly': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'employment': 'unemployed', 'occupation': '', 'employedPeriod': '', 'employer': '', 'businessType': '', 'businessAddress': '', 'businessAddressRegionProvince': '', 'businessAddressRegionCity': '', 'businessAddressRegionArea': '', 'businessAddressDetailed': '', 'businessPhone': '', 'riskInfo': {'isApplyToOpenTradingStructure': 'Y', 'isTradingStructureAggree': 'Y', 'disclaimerVideo': '', 'passportMaterial': ['c5a070ad-daee-4cab-b569-f402c8696c79.jpg', '890b492c-4565-4a98-b263-3ec7a63cdbc5.jpg'], 'sourceOfWealthOther': '', 'addressVerificationMaterials': [], 'bankCardMaterials': [], 'writtenApplicationMaterials': [], 'proofOfIncome': [], 'otherInformation': [], 'totalAnnualCustomerRevenueHK': 'lt999999', 'totalAnnualCustomerRevenueHKOther': '', 'customerNetAssetValueHK': 'gt8000000', 'customerNetAssetValueHKOther': '', 'sourceOfWealth': ['savings', 'investment'], 'securities': '1To5Years', 'CBBC': 'lt1Year', 'warrants': '6To10Years', 'futures': '1To5Years', 'options': 'lt1Year', 'algoTrade': '', 'isAlgoTrade': '', 'isAlgoTradeAggree': '', 'bullion': 'lt1Year', 'foreignExchange': 'lt1Year', 'otherInvestmentText': '', 'otherInvestment': '', 'isLearnAboutProducts': 'Y', 'isIndustryExperience': 'Y', 'isStocks': 'N', 'isBankruptcy': 'N', 'bankruptcyDate': None, 'bankruptcyProve': [], 'isInAgtJobs': 'N', 'agtPosition': '', 'isBondFuturesClientsConnected': 'N', 'agtName': '', 'isAcquaintHighLevel': 'N', 'acquaintHighLevelInstructions': '', 'acquaintHighLevelInstructionsProve': [], 'isAmericanResidents': 'N', 'americanResidentsTaxId': '', 'isAmericanResidentsb': 'N', 'americanResidentsTaxIdb': '', 'isPoliticalFigure': 'N', 'politicalFigureName': '', 'purposeOfInvestment': ['asset', 'income'], 'riskTolerance': 'high', 'identityAuthenticationImg': ['a4a5c6d1-579f-4a01-9e18-e485e6030206.jpg'], 'passportMaterialBackup': ['176fac6b-e3b1-4367-a707-6a61268797bb.jpg', '4e83a101-94c5-4a85-89c1-b696179d9125.jpg'], 'signatureMaterial': ['d04b465c-c8ab-4212-b1e6-faef952fc2b2.jpg'], 'isReferralCode': 'N', 'passportMaterialBak': ['c5a070ad-daee-4cab-b569-f402c8696c79.jpg', '890b492c-4565-4a98-b263-3ec7a63cdbc5.jpg'], 'identityAuthenticationImgBak': ['703d42e2-bcdc-4905-8f21-e407c1641e16.jpg', 'a4a5c6d1-579f-4a01-9e18-e485e6030206.jpg'], 'signatureMaterialBak': ['d04b465c-c8ab-4212-b1e6-faef952fc2b2.jpg']}, 'pastChineseName': '', 'idTypeOther': '', 'employmentOther': '', 'career': '', 'marriage': '', 'education': '', 'attachment': {}, 'relationWithMasterImmediateFamily': '', 'relationWithMasterOthers': '', 'isReSubmit': '', 'ocrInfo': {'province': '广东省', 'city': '汕尾市', 'idNo': '441502199602120215', 'userName': '郑钦元', 'sex': '男', 'contactAddr': '广东省汕尾市城区新港街道新港海滨居委广场路一巷48号101', 'birthday': '1996/2/12', 'nationality': '汉', 'cardedPlace': '抚州市公安局临川分局', 'cardedExpiryDate': '20150911-20250911'}, 'createdTime': 1560135586843.0, 'updatedTime': 1560135586843.0}
2019-06-10 14:14:44,882 del_mongo.py INFO [line:119] apply 表关联的字段为 idpUserId : 1b58e5f2-9944-463a-8452-ea4540da331b
2019-06-10 14:14:44,882 del_mongo.py INFO [line:120] 正在查询关联表 users 的数据
2019-06-10 14:14:44,933 del_mongo.py INFO [line:66] users 表符合查询条件{'subject': '1b58e5f2-9944-463a-8452-ea4540da331b'} 的数据有1 条
2019-06-10 14:14:45,036 del_mongo.py INFO [line:69] {'_id': ObjectId('5cfdc78a1760b6371d0950f2'), 'email_verified': True, 'phone_number_verified': True, 'roles': [], 'enabled': True, 'preferred_username': '15089514626', 'email': 'onedi@qq.com', 'phone_number': '8615089514626', 'custom': {'device_id': '4d606f1da1075c25'}, 'subject': '1b58e5f2-9944-463a-8452-ea4540da331b', 'created_at': datetime.datetime(2019, 6, 10, 2, 59, 21, 418000), 'updated_at': datetime.datetime(2019, 6, 10, 5, 47, 6, 262000), 'secret': '$2a$08$q49qTppc0qhEfyLMTqoBxOAkQhBEu2/KAPcc52BFmnmBvtDSNW1Em', '__v': 0}
2019-06-10 14:14:45,036 del_mongo.py INFO [line:136] users 表关联的字段为 subject : 1b58e5f2-9944-463a-8452-ea4540da331b
2019-06-10 14:14:45,036 del_mongo.py INFO [line:137] 正在查询关联表 userdevices 的数据
2019-06-10 14:14:45,085 del_mongo.py INFO [line:66] userdevices 表符合查询条件{'subject': '1b58e5f2-9944-463a-8452-ea4540da331b'} 的数据有2 条
2019-06-10 14:14:45,187 del_mongo.py INFO [line:69] {'_id': ObjectId('5cfdc7961e1187134380f2c6'), 'device_id': '4d606f1da1075c25', 'subject': '1b58e5f2-9944-463a-8452-ea4540da331b', '__v': 0, 'code': '507e35ce-bc65-482e-8bc5-bd7ad9a1c08a', 'created_at': datetime.datetime(2019, 6, 10, 3, 23, 2, 582000), 'verified': True}
2019-06-10 14:14:45,187 del_mongo.py INFO [line:152] ***********************************

2019-06-10 14:14:45,187 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-06-10 14:14:45,237 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001E856970A88>
2019-06-10 14:14:45,237 del_mongo.py INFO [line:171] ***********************************

2019-06-10 14:14:45,238 del_mongo.py INFO [line:69] {'_id': ObjectId('5cfdf52a1e1187134383f952'), 'device_id': '20239F40-CBC5-4EDB-8A54-A64ACDB499DC', 'subject': '1b58e5f2-9944-463a-8452-ea4540da331b', '__v': 0, 'code': '7031f135-71d5-4184-9271-fbe8097c5c71', 'created_at': datetime.datetime(2019, 6, 10, 6, 14, 2, 269000), 'verified': True}
2019-06-10 14:14:45,238 del_mongo.py INFO [line:152] ***********************************

2019-06-10 14:14:45,238 del_mongo.py INFO [line:153] 没有关联数据,直接删除userdevices 表
2019-06-10 14:14:45,288 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001E856970648>
2019-06-10 14:14:45,288 del_mongo.py INFO [line:171] ***********************************

2019-06-10 14:14:45,289 del_mongo.py INFO [line:152] ***********************************

2019-06-10 14:14:45,289 del_mongo.py INFO [line:153] 没有关联数据,直接删除users 表
2019-06-10 14:14:45,338 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001E856970B88>
2019-06-10 14:14:45,338 del_mongo.py INFO [line:171] ***********************************

2019-06-10 14:14:45,338 del_mongo.py INFO [line:152] ***********************************

2019-06-10 14:14:45,338 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply 表
2019-06-10 14:14:45,387 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001E856970AC8>
2019-06-10 14:14:45,388 del_mongo.py INFO [line:171] ***********************************

2019-06-10 14:14:45,388 del_mongo.py INFO [line:152] ***********************************

2019-06-10 14:14:45,388 del_mongo.py INFO [line:153] 没有关联数据,直接删除apply_info 表
2019-06-10 14:14:45,442 del_mongo.py INFO [line:167] <pymongo.results.DeleteResult object at 0x000001E856982F88>
2019-06-10 14:14:45,442 del_mongo.py INFO [line:171] ***********************************

2019-06-10 14:14:45,443 del_mongo.py INFO [line:37] close Client
2019-06-10 14:14:45,492 del_mongo.py INFO [line:44] users 表预计删除 1 条记录
2019-06-10 14:14:45,492 del_mongo.py INFO [line:44] apply 表预计删除 1 条记录
2019-06-10 14:14:45,493 del_mongo.py INFO [line:44] userdevices 表预计删除 2 条记录
2019-06-10 14:14:45,493 del_mongo.py INFO [line:44] apply_info 表预计删除 1 条记录
2019-06-10 14:14:45,493 del_mongo.py INFO [line:51] users 表实际删除 1 条记录
2019-06-10 14:14:45,493 del_mongo.py INFO [line:51] apply 表实际删除 1 条记录
2019-06-10 14:14:45,493 del_mongo.py INFO [line:51] userdevices 表实际删除 2 条记录
2019-06-10 14:14:45,493 del_mongo.py INFO [line:51] apply_info 表实际删除 1 条记录
